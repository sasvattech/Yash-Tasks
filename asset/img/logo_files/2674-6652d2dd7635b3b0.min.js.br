"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="04604b86-0a42-5a3c-812f-840384fc123a")}catch(e){}}();
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[2674],{331221:(e,t,r)=>{r.d(t,{x:()=>i,z:()=>n});let n={CREATED:"ADD",MODIFIED:"MOD",REMOVED:"DEL"},i={CREATED:"+",MODIFIED:"\u2732",CHILD_MODIFIED:"\u21B5",REMOVED:"-"}},885456:(e,t,r)=>{r.d(t,{E:()=>c});var n=r(966664),i=r(396353),a=r(258600),s=r(640855),l=r(726113),o=r(235307);class c extends l.R{constructor(e,t,r){super(e,t,r),this.id=e,this.nodeChange=t,this.scene=r}get parent(){return this.parentGuid?this.scene.getNodeByGuid(this.parentGuid):null}get children(){return this.scene.getChildrenByParentGuid(this.guid)}get type(){return this.isState?"STATE":super.type}get otherVersions(){if(!this.isSubscribedAsset)return[];let e=this.scene.internalCanvas;if(!e)return[];let t=this.key;return t?e.children.filter(e=>e.type==e.type&&e.key===t&&e.id!=e.id):[]}get consumedStyles(){return this.consumedStyleIds.map(e=>this.scene.getStyleByStyleId(e)).filter(n.Vq)}get consumedVariables(){return this.consumedVariableIds.map(e=>this.scene.getVariableByVariableId(e)).filter(n.Vq)}get internalOnly(){return this.nodeChange.internalOnly||this.parent?.internalOnly||!1}get stateGroupId(){return this.isStateGroup?this._assetId(i.GU):this.isSymbol?this.parent?.stateGroupId??null:null}get backingSymbol(){let e=this.backingSymbolId;return e?this.scene.getNodeByGuid(e):null}get backingStateGroup(){let e=this.backingSymbol;if(!e)return null;let t=e.parent;return t&&t.isStateGroup?t:null}get absoluteTransform(){let e=this.transform,t=this.parent?.absoluteTransform;if(!e||!t)return a.s.identity().toFigMatrix();{let r=a.s.fromFigMatrix(t);return r.multiply(a.s.fromFigMatrix(e)),r.toFigMatrix()}}get containingSymbol(){return this.findAncestor(e=>e.isSymbol)}get containingPage(){return this.findAncestor(e=>e.isPage)}get isState(){return this.isSymbol&&!!this.parent?.isStateGroup}get isPrimaryInstance(){return this.isInstance}get isLooseComponent(){return this.isSymbol&&!this.isState}get isProductComponent(){return this.isStateGroup||this.isLooseComponent}get isInternalOnly(){return this.someAncestor(e=>!!e.nodeChange.internalOnly,{includeSelf:!0})}getFriendlyVariableModeString(e){if(!this.isVariableCollection)return"";let t=s.c1.fromKiwi(e),r=this.nodeChange.variableSetModes?.find(e=>e.id&&s.c1.fromKiwi(e.id)===t);return r?`${r.name} (${t})`:`<missing mode> (${t})`}get variableDependenciesByModeId(){if(!this.isVariable)return{};let e={},t=this.scene,r=t.getVariableCollectionByCollectionId(this.variableCollectionId);return this.nodeChange.variableDataValues?.entries?.forEach(n=>{if(n.modeID){let a=r?.getFriendlyVariableModeString(n.modeID)??s.c1.fromKiwi(n.modeID);e[a]=[],function r(n,a){if(a?.dataType==="ALIAS")!function(r,n){if(!n?.value?.alias)return;let a=i.sD.fromKiwi(n.value.alias);if(!a)return;let s=t.getVariableByVariableId(a);s&&e[r].push(s)}(n,a);else if(a?.dataType==="EXPRESSION")!function(e,t){for(let n of t?.value?.expressionValue?.expressionArguments??[])r(e,n)}(n,a);else if(a?.dataType==="MAP")return function(e,t){for(let n of t?.value?.mapValue?.values??[])r(e,n.value)}(n,a)}(a,n.variableData)}}),e}generateDisplayProperties(){let e=super.generateDisplayProperties(),t=this.containingPage,r=e.rightBadges;return null!=this.parent||this.isDocument||r.push({type:"error",value:"Orphan"}),{...e,longName:t?`${t.displayProperties.name} > ${this.name}`:this.name,rightBadges:r}}generateDimensionalInfoItem(){let e=super.generateDimensionalInfoItem();return null==e?null:(0,o.Sv)(e,[this.absoluteTransform&&this.generatePositionItem("Absolute position",this.absoluteTransform)])}generateDesignSystemsInfoItem(){return(0,o.Sv)(super.generateDesignSystemsInfoItem(),[this.isPrimaryInstance&&this.backingStateGroup&&this.scene.generateNodeLinkItem("Backing state group",this.backingStateGroup.guid),this.isStyle&&this.styleId&&(0,o.$7)({label:"Style consumers",list:this.scene.getStyleConsumers(this.styleId),generateChild:(e,t)=>this.scene.generateNodeLinkItem(e,t.guid)}),this.isVariable&&this.variableId&&(0,o.$7)({label:"Variable consumers",list:this.scene.getVariableConsumers(this.variableId),generateChild:(e,t)=>this.scene.generateNodeLinkItem(e,t.guid)}),this.isVariableCollection&&this.variableCollectionId&&(0,o.$7)({label:"Nodes with explicit mode",list:this.scene.getNodesWithExplicitModeForVariableSet(this.variableCollectionId),generateChild:(e,t)=>this.scene.generateNodeLinkItem(e,t.guid)}),this.isAsset&&(0,o.$7)({label:"Other versions",list:this.otherVersions,generateChild:(e,t)=>this.scene.generateNodeLinkItem(e,t.guid)}),this.isVariable&&this.variableCollectionId&&this.scene.generateVariableCollectionLinkItem("Variable collection",this.variableCollectionId),this.isVariableCollection&&this.variableCollectionId&&(0,o.$7)({label:"Variables in collection",list:this.scene.getVariablesInCollection(this.variableCollectionId),generateChild:(e,t)=>this.scene.generateNodeLinkItem(e,t.guid)})])}}},2685:(e,t,r)=>{r.d(t,{y:()=>n});let n=Symbol("Blobs not supported.")},602881:(e,t,r)=>{if(r.d(t,{TZ:()=>o,YY:()=>i,iC:()=>l,nP:()=>s,nd:()=>a,tP:()=>c}),443==r.j)var n=r(235307);let i=new Set(["USER","PLUGIN","AI","REST_API"]);function a(e,t){return Number(i.has(t.type))-Number(i.has(e.type))}let s={MIXED:"MIXED",USER:"USER",PLUGIN:"PLGIN",AI:"AI",INVALID:"INVLD",SYSTEM:"SYSTM",TEST_SETUP:"TEST",REST_API:"REST",ONBOARDING:"ONBRD",AUTOSAVE:"ASAVE"};function l(e){let t=[];for(let r of e?.snapshots??[])for(let e of r.frames??[])for(let r of e.stack??[])t.push(r);return t.sort(a)}function o(e){let t="INVALID";for(let r of e)if(r.type&&"INVALID"!==r.type){if("INVALID"===t)t=r.type;else if(t!==r.type){t="MIXED";break}}return{type:"editType",value:t}}class c{constructor(e){this.fieldNamesByFieldNumber=function(e){let t=new Map,r=e.definitions.find(e=>"NodeChange"===e.name);if(!r)return console.error("Couldn't find NodeChange definition in schema"),t;for(let e of r.fields)t.set(e.value,e.name);return t}(e)}generateEditScopeItems(e){let{editScopeInfo:t,aiEditedNodeChangeFieldNumbers:r}=e;return(0,n.QB)([t?.snapshots&&this.generateEditScopeSnapshotsItem(t.snapshots),r&&this.generateAiEditedNodeFieldsItem(r)])}generateEditScopeSnapshotsItem(e){return(0,n.$7)({label:"Edit Scope Snapshots",list:e,generateChild:(e,t)=>t.nodeChangeFieldNumbers?{label:e,children:[(0,n.$7)({label:"Frames",list:t.frames??[],generateChild:(e,t)=>this.generateEditScopeSnapshotFrameItem(e,t),expandByDefault:!0}),(0,n.$7)({label:"Fields",list:t.nodeChangeFieldNumbers??[],generateChild:(e,t)=>this.generateFieldItem(e,t),expandByDefault:!0})],expandByDefault:!0}:(0,n.$7)({label:e,list:t.frames??[],generateChild:(e,t)=>this.generateEditScopeSnapshotFrameItem(e,t),expandByDefault:!0}),expandByDefault:!0})}generateAiEditedNodeFieldsItem(e){return(0,n.$7)({label:"AI Edited Fields",list:e||[],expandByDefault:!0,generateChild:(e,t)=>this.generateFieldItem(e,t)})}generateEditScopeSnapshotFrameItem(e,t){return(0,n.$7)({label:e,list:t.stack??[],generateChild:(e,t)=>(0,n.B_)(e,{type:"editScope",value:t}),expandByDefault:!0})}generateFieldItem(e,t){let r=this.fieldNamesByFieldNumber.get(t);return(0,n.B_)(e,r?{type:"nonUserText",value:r}:{type:"error",value:`Unknown field number ${t}`})}}},640855:(e,t,r)=>{r.d(t,{SW:()=>n,c1:()=>i,dB:()=>a,r4:()=>l});var n,i,a,s=r(572304);function l(e,t){let r=t.toGuidStrIfLocal(e);if(r)return i.format(r);let n=t.toRefIfSubscribed(e);return n?`${n.key.slice(0,5)}...${n.key.slice(-5)}/${n.version}`:e}(n||(n={})).fromString=function(e){return e},(e=>{e.fromString=function(e){return e},e.fromKiwi=function(e){return s.dI(e)},e.format=function(e){return`(${e})`},e.isValid=function(e){return s.fn(s.sH(e))}})(i||(i={})),(e=>{e.fromKiwi=function(e){return e.guids?.map(i.fromKiwi)??[]},e.fromStrings=function(e){return e},e.format=function(e){return`[${e.map(i.format).join(", ")}]`},e.isValid=function(e){return e.length>0&&e.every(i.isValid)}})(a||(a={}))},761518:(e,t,r)=>{r.d(t,{I6:()=>u,Si:()=>g,Tj:()=>c,U9:()=>h,jJ:()=>o,pb:()=>d,zN:()=>m});var n=r(461816),i=r.n(n);let a=()=>!0;function s(e){return Array.isArray(e)?e:[e]}function l(e,t){return"parent"===t?[e.parent]:e.children}function o(e,t,r,{includeSelf:n,shouldSkipAfter:a,shouldBreakAfter:c}={}){let u=s(e),d=n?[...u]:i()(u,e=>l(e,t));for(;;){let e=d.pop();if(!e||(r(e),c?.(e)))return;if(!a?.(e))for(let r of l(e,t))d.push(r)}}function c(e,t,r,n={}){let i=[];return o(e,t,e=>i.push(r(e)),n),i}function u(e,t,r,{includeSelf:n,shouldSkipAfter:i,shouldBreakAfter:a}={}){let s;return o(e,t,e=>{r(e)&&(s=e)},{includeSelf:n,shouldSkipAfter:i,shouldBreakAfter:e=>null!=s||a?.(e)||!1}),s}function d(e,t,r,n={}){let i=[];return o(e,t,e=>{r(e)&&i.push(e)},n),i}function h(e,t,r=a,n={}){let i=0;return o(e,t,e=>{r(e)&&i++},n),i}function m(e,t,r,n={}){return null!=u(s(e),t,r,n)}function g(e,t,r,n={}){return!m(s(e),t,e=>!r(e),n)}},726113:(e,t,r)=>{r.d(t,{R:()=>f});var n=r(140593),i=r(543509),a=r(396353),s=r(177131),l=r(966712),o=r(618056),c=r(416095),u=r(640855),d=r(632857),h=r(79674),m=r(397565),g=r(235307),p=r(40963);class f extends h.s{constructor(e,t,r){super(e),this.id=e,this.nodeChange=t,this.scene=r,t.guid||console.error("Node is missing guid",t)}get name(){return(0,p.bU)(this.nodeChange.name??"",this.scene.resource.sensitiveTextPolicy)}get text(){return(0,p.bU)(this.nodeChange.textData?.characters??"",this.scene.resource.sensitiveTextPolicy)}get guidObj(){return this.nodeChange.guid??{localID:-1,sessionID:-1}}get guid(){return u.c1.fromKiwi(this.guidObj)}get parentGuid(){let e=this.nodeChange.parentIndex?.guid;return e?u.c1.fromKiwi(e):null}get nodeType(){return this.nodeChange.type||"NONE"}get type(){let e=this.nodeType;if("INSTANCE"===e)return"PRIMARY_INSTANCE";if("VARIABLE_SET"===e)return"VARIABLE_COLLECTION";if(this.isStateGroup)return"STATE_GROUP";if(this.isStyle){let e=this.nodeChange.styleType;switch(e){case"FILL":return"FILL_STYLE";case"STROKE":return"STROKE_STYLE";case"TEXT":return"TEXT_STYLE";case"EFFECT":return"EFFECT_STYLE";case"EXPORT":return"EXPORT_STYLE";case"GRID":return"GRID_STYLE";default:(0,n.j)(e)}}else if("FRAME"===e&&this.nodeChange.resizeToFit)return"GROUP";return e}get overrideKey(){let e=this.nodeChange.overrideKey;return e?u.c1.fromKiwi(e):null}get key(){return(0,s.sg)(this.nodeChange.key??this.nodeChange.componentKey??(this.nodeChange.sharedStyleMasterData?.styleKey||this.nodeChange.sharedStyleReference?.styleKey||null))}get version(){return(0,s.Xf)(this.nodeChange.version??this.nodeChange.sharedSymbolVersion??null)}get assetRef(){return s.iU.fromKiwi({key:this.key??void 0,version:this.version??void 0})}_assetId(e){return this.isSubscribedAsset?this.assetRef?e.fromRef(this.assetRef):null:e.fromLocalNodeIdStr(this.guid)}get symbolId(){return this.isSymbol?this._assetId(a.Ws):null}get stateGroupId(){return this.isStateGroup?this._assetId(a.GU):null}get styleId(){return this.isStyle?this._assetId(a.PK):null}get variableId(){return this.isVariable?this._assetId(a.sD):null}get variableCollectionId(){return this.isVariableCollection?this._assetId(a.gr):this.isVariable&&this.nodeChange.variableSetID?a.gr.fromKiwi(this.nodeChange.variableSetID):null}get responsiveSetAssetId(){return this.isResponsiveSetAsset?this._assetId(a.cd):null}get publishId(){let e=this.nodeChange.publishID;return e?u.c1.fromKiwi(e):null}get publishFile(){return this.nodeChange.publishFile??null}get isRenderingNode(){return!this.isDocument&&!this.isCanvas&&!this.isStyle&&!this.isVariable&&!this.isVariableCollection&&!this.isVariableOverride}get isInstance(){return"INSTANCE"===this.nodeType}get isSymbol(){return"SYMBOL"===this.nodeType}get isStateGroup(){return"FRAME"===this.nodeType&&null!=this.nodeChange.isStateGroup}get isComponentish(){return this.isSymbol||this.isStateGroup}get isStyle(){return this.nodeChange.styleType&&c.og.indexOf(this.nodeChange.styleType)>-1}get isVariable(){return"VARIABLE"===this.nodeType}get isVariableCollection(){return this.isRootVariableCollection||this.isExtendedVariableCollection}get isRootVariableCollection(){return!!("VARIABLE_SET"===this.nodeType&&!this.nodeChange.backingVariableSetId)}get isExtendedVariableCollection(){return!!("VARIABLE_SET"===this.nodeType&&this.nodeChange.backingVariableSetId)}get isVariableOverride(){return"VARIABLE_OVERRIDE"===this.nodeType}get isResponsiveSetAsset(){return"RESPONSIVE_SET"===this.nodeType}get isAsset(){return this.isSymbol||this.isStateGroup||this.isStyle||this.isVariable||this.isVariableCollection||this.isVariableOverride||this.isResponsiveSetAsset}get isLocalAsset(){return this.isAsset&&!this.isSubscribedAsset}get isSubscribedAsset(){return this.isComponentish?(0,l.kc)().ds_publish_file_deprecation?null!=this.nodeChange.publishID:null!=this.nodeChange.publishFile:this.isStyle?this.nodeChange.key&&this.nodeChange.version:(!!this.isVariable||!!this.isVariableCollection||!!this.isResponsiveSetAsset)&&!!this.nodeChange.key}get isStack(){return null!=this.nodeChange.stackMode&&"NONE"!==this.nodeChange.stackMode}get isCanvas(){return"CANVAS"===this.nodeChange.type}get isPage(){return this.isCanvas}get isDocument(){return"DOCUMENT"===this.nodeChange.type}get backingSymbolId(){let e=this.nodeChange.overriddenSymbolID??this.nodeChange.symbolData?.symbolID;return e?u.c1.fromKiwi(e):null}get transform(){return this.nodeChange.transform}get isImmutableFrame(){let e=this.nodeType;return"STICKY"===e||"SHAPE_WITH_TEXT"===e||"CONNECTOR"===e||"CODE_BLOCK"===e||"MEDIA"===e||"SECTION_OVERLAY"===e||"TABLE"===e}get overridesList(){return this.nodeChange.symbolData?.symbolOverrides??[]}get dsdList(){return this.nodeChange.derivedSymbolData??[]}get immutableFrameSublayerOverridesList(){return this.nodeChange.nodeGenerationData?.overrides??[]}get difdList(){return this.nodeChange.derivedImmutableFrameData?.overrides??[]}get imageHashes(){let e=[],t=t=>{t?.hash&&e.push((0,o.qg)(t))},r=e=>{t(e.image),t(e.imageThumbnail),t(e.animatedImage)},n=e=>{if(e)for(let t of e)r(t)};n(this.nodeChange.fillPaints),n(this.nodeChange.strokePaints),n(this.nodeChange.backgroundPaints),n(this.nodeChange.widgetHoverStyle?.fillPaints),n(this.nodeChange.widgetHoverStyle?.strokePaints);let i=t=>{t&&e.push(t)};return i(this.nodeChange.embedData?.thumbnailImageHash),i(this.nodeChange.embedData?.faviconImageHash),i(this.nodeChange.linkPreviewData?.thumbnailImageHash),i(this.nodeChange.linkPreviewData?.faviconImageHash),i(this.nodeChange.richMediaData?.mediaHash),e}get consumedStyleIds(){let e=[];function t(t){for(let r of d.GP){let n=t[r];if(n){let t=a.PK.fromKiwi(n);t&&e.push(t)}}}for(let e of(t(this.nodeChange),this.nodeChange.symbolData?.symbolOverrides??[]))t(e);for(let e of this.nodeChange.textData?.styleOverrideTable??[])t(e);for(let e of this.nodeChange.vectorData?.styleOverrideTable??[])t(e);for(let e of this.nodeChange.nodeGenerationData?.overrides??[])t(e);return e}get consumedVariableIds(){let e=new Set;function t(t){if(!t)return;let r=a.sD.fromKiwi(t);r&&e.add(r)}for(let e of d.EI)!function(e){for(let r of e??[])t(r.colorVar?.value?.alias)}(this.nodeChange[e]);for(let e of this.nodeChange.variableConsumptionMap?.entries??[])t(e.variableData?.value?.alias),e.variableData?.value?.expressionValue&&function e(r){for(let n of r.expressionArguments??[])t(n.value?.alias),n.value?.expressionValue&&e(n.value.expressionValue)}(e.variableData.value.expressionValue);return[...e.values()]}generateTrackingInfoItem(){return null}generateRawProperties(){return this.scene.generateNodeChangeItems(this.nodeChange)}generateDisplayProperties(){let e=[];return this.isStack&&e.push({type:"info",value:"Stack"}),{leftBadges:[{type:"type",value:this.type}],primaryId:u.c1.format(this.guid),secondaryId:this.overrideKey?u.c1.format(this.overrideKey):null,name:this.name,longName:this.name,rightBadges:e,memoryFraction:null}}generateSearchProperties(){return{id:this.id,guid:this.guid,type:[this.type,this.nodeType,m.uy[this.type]],parentGuid:this.parentGuid,overrideKey:this.overrideKey,backingSymbolId:this.backingSymbolId,publishId:this.publishId,consumedStyleIds:this.consumedStyleIds.map(a.PK.toString),name:this.name,field:Object.keys(this.nodeChange),text:this.text,key:this.key,version:this.version,imageHashes:this.imageHashes,symbolId:this.symbolId,stateGroupId:this.stateGroupId,styleId:this.styleId,variableId:this.variableId,variableCollectionId:this.variableCollectionId}}generateComputedProperties(){return(0,g.QB)([this.generateDimensionalInfoItem(),this.generateDesignSystemsInfoItem(),this.generateFigJamInfoItem(),this.generateTrackingInfoItem()])}generateDimensionalInfoItem(){if(!this.isRenderingNode)return null;let e=this.nodeChange.size;return{label:"Dimensional info",children:(0,g.QB)([e&&(0,g.B_)("Width",{type:"numeric",value:e.x}),e&&(0,g.B_)("Height",{type:"numeric",value:e.y}),this.transform&&this.generatePositionItem("Relative position",this.transform)])}}generateDesignSystemsInfoItem(){let e=this.isAsset,t=this.isInstance,r=e?this.key:void 0,n=e?this.version:void 0;return{label:"Design systems info",children:(0,g.QB)([e&&(0,g.B_)("Asset publish type",{type:"nonUserText",value:this.isSubscribedAsset?"Subscribed":"Local"}),r&&(0,g.B_)("Asset key",{type:"nonUserText",value:r,sensitive:!1}),n&&(0,g.B_)("Asset version",{type:"nonUserText",value:n,sensitive:!1}),(0,g.$7)({label:"Consumed variables",list:this.consumedVariableIds,generateChild:this.scene.generateVariableLinkItem}),(0,g.$7)({label:"Consumed styles",list:this.consumedStyleIds,generateChild:this.scene.generateStyleLinkItem}),t&&this.scene.generateNodeLinkItem("Backing symbol",this.backingSymbolId),t&&this.generateOverridesListItem("Instance overrides",this.overridesList),t&&this.generateOverridesListItem("Derived symbol data",this.dsdList)])}}generateFigJamInfoItem(){let e=this.isImmutableFrame;return{label:"FigJam info",children:(0,g.QB)([e&&this.generateOverridesListItem("Overrides",this.immutableFrameSublayerOverridesList),e&&this.generateOverridesListItem("Derived immutable frame data",this.difdList)])}}generateOverridesListItem(e,t){return{label:e,children:[...t].sort((e,t)=>(function(e,t){let r=e.guids??[],n=t.guids??[];for(let e=0;e<Math.min(r.length,n.length);e++){let t=r[e],i=n[e];if(t.sessionID!==i.sessionID)return t.sessionID-i.sessionID;if(t.localID!==i.localID)return t.localID-i.localID}return r.length-n.length})(e.guidPath||{},t.guidPath||{})).map(e=>this.generateOverrideItem(this,e))}}generateOverrideItem(e,{guidPath:t,overrideLevel:r,...n}){let i=u.dB.format(u.dB.fromKiwi(t??{}));return{label:0===r?i:`${i} (level ${r})`,children:this.scene.generateNodeChangeItems(n)}}generatePositionItem(e,t){let{m00:r,m01:n,m02:a,m10:s,m11:l,m12:o}=t,c=r*l-n*s,u=(()=>{let e=180/Math.PI*Math.atan2(s,r);return(0,i.xN)(e,0,1e-4)?0:-1*e})(),d=c<0?(0,i.xN)(u,0,1e-4)?"Vertically":(0,i.xN)(Math.abs(u),180,1e-4)?"Horizontally":"Yes":"No";return{label:e,children:[(0,g.B_)("X",{type:"numeric",value:a}),(0,g.B_)("Y",{type:"numeric",value:o}),(0,g.B_)("Angle",{type:"numeric",value:u}),(0,g.B_)("Scale",{type:"numeric",value:c}),(0,g.B_)("Mirrored",{type:"nonUserText",value:d})],expandByDefault:!0}}}},79674:(e,t,r)=>{r.d(t,{s:()=>i});var n=r(761518);class i{constructor(e){this.id=e}get displayProperties(){return this._cachedDisplayProperties||(this._cachedDisplayProperties=this.generateDisplayProperties()),this._cachedDisplayProperties}get searchProperties(){return this._cachedSearchProperties||(this._cachedSearchProperties=this.generateSearchProperties()),this._cachedSearchProperties}get rawProperties(){return this._cachedRawProperties||(this._cachedRawProperties=this.generateRawProperties()),this._cachedRawProperties}get computedProperties(){return this._cachedComputedProperties||(this._cachedComputedProperties=this.generateComputedProperties()),this._cachedComputedProperties}freeze(){return new a(this)}forEachAncestor(e,t){return(0,n.jJ)(this,"parent",e,t)}forEachDescendant(e,t){return(0,n.jJ)(this,"children",e,t)}mapAncestors(e,t){return(0,n.Tj)(this,"parent",e,t)}mapDescendants(e,t){return(0,n.Tj)(this,"children",e,t)}filterAncestors(e,t){return(0,n.pb)(this,"parent",e,t)}filterDescendants(e,t){return(0,n.pb)(this,"children",e,t)}findAncestor(e,t){return(0,n.I6)(this,"parent",e,t)}findDescendant(e,t){return(0,n.I6)(this,"children",e,t)}someAncestor(e,t){return(0,n.zN)(this,"parent",e,t)}someDescendant(e,t){return(0,n.zN)(this,"children",e,t)}everyAncestor(e,t){return(0,n.Si)(this,"parent",e,t)}everyDescendant(e,t){return(0,n.Si)(this,"children",e,t)}countAncestors(e,t){return(0,n.U9)(this,"parent",e,t)}countDescendants(e,t){return(0,n.U9)(this,"children",e,t)}}class a extends i{constructor(e){super(e.id),this.parent=e.parent,this.children=e.children,this._cachedDisplayProperties=e.displayProperties,this._cachedSearchProperties=e.searchProperties,this._cachedRawProperties=e.rawProperties,this._cachedComputedProperties=e.computedProperties}generateDisplayProperties(){return this._cachedDisplayProperties}generateSearchProperties(){return this._cachedSearchProperties}generateRawProperties(){return this._cachedRawProperties}generateComputedProperties(){return this._cachedComputedProperties}}},397565:(e,t,r)=>{r.d(t,{SP:()=>a,p7:()=>s,uy:()=>i});var n=r(140593);let i={NONE:"NONE",DOCUMENT:"DOC",CANVAS:"CANV",GROUP:"GROUP",FRAME:"FRAME",BOOLEAN_OPERATION:"BOOL",VECTOR:"VECT",STAR:"STAR",LINE:"LINE",ELLIPSE:"ELLPS",RECTANGLE:"RECT",REGULAR_POLYGON:"POLY",ROUNDED_RECTANGLE:"RRECT",TEXT:"TEXT",TEXT_PATH:"TXPTH",SLICE:"SLICE",SYMBOL:"SYMB",STATE:"STATE",PRIMARY_INSTANCE:"PINST",NESTED_INSTANCE:"NINST",STICKY:"STCKY",SHAPE_WITH_TEXT:"SWTXT",CONNECTOR:"CONN",CODE_BLOCK:"CODE",WIDGET:"WIDGT",STAMP:"STAMP",MEDIA:"MEDIA",HIGHLIGHT:"HIGH",SECTION:"SECT",SECTION_OVERLAY:"SECTO",WASHI_TAPE:"WASHI",STATE_GROUP:"STGRP",FILL_STYLE:"FSTYL",STROKE_STYLE:"SSTYL",TEXT_STYLE:"TSTYL",EFFECT_STYLE:"ESTYL",EXPORT_STYLE:"XSTYL",GRID_STYLE:"GSTYL",VARIABLE:"VAR",VARIABLE_COLLECTION:"V_COL",VARIABLE_OVERRIDE:"V_OVR",TABLE:"TABLE",TABLE_CELL:"TCELL",SLIDE:"SLIDE",SLIDE_ROW:"SROW",SLIDE_GRID:"SGRID",ASSISTED_LAYOUT:"ALAYO",INTERACTIVE_SLIDE_ELEMENT:"FLAPP",MODULE:"MOD",RESPONSIVE_SET:"RESET",CODE_LIBRARY:"<LIB>",CODE_FILE:"<FIL>",CODE_COMPONENT:"<COM>",CODE_INSTANCE:"<INS>",JOURNAL_ENTRY:"JRNL",DIFF_CHUNK:"CHUNK",CODE_LAYER:"<LAY>"};var a=(e=>(e[e.DesignSystems=0]="DesignSystems",e[e.FigJam=1]="FigJam",e[e.Editor=2]="Editor",e[e.Page=3]="Page",e[e.Other=4]="Other",e))(a||{});function s(e){switch(e){case"CODE_COMPONENT":case"CODE_INSTANCE":case"CODE_LIBRARY":case"CODE_FILE":case"CODE_LAYER":case"EFFECT_STYLE":case"EXPORT_STYLE":case"FILL_STYLE":case"GRID_STYLE":case"MODULE":case"NESTED_INSTANCE":case"PRIMARY_INSTANCE":case"STATE_GROUP":case"STATE":case"STROKE_STYLE":case"SYMBOL":case"TEXT_STYLE":case"VARIABLE_COLLECTION":case"VARIABLE_OVERRIDE":case"VARIABLE":return 0;case"BOOLEAN_OPERATION":case"ELLIPSE":case"LINE":case"RECTANGLE":case"REGULAR_POLYGON":case"ROUNDED_RECTANGLE":case"STAR":case"VECTOR":return 2;case"CODE_BLOCK":case"CONNECTOR":case"HIGHLIGHT":case"MEDIA":case"SECTION_OVERLAY":case"SHAPE_WITH_TEXT":case"STAMP":case"STICKY":case"TABLE":case"WASHI_TAPE":return 1;case"CANVAS":case"DIFF_CHUNK":case"DOCUMENT":case"JOURNAL_ENTRY":return 3;case"ASSISTED_LAYOUT":case"FRAME":case"GROUP":case"INTERACTIVE_SLIDE_ELEMENT":case"NONE":case"NONE":case"RESPONSIVE_SET":case"SECTION":case"SLICE":case"SLIDE_GRID":case"SLIDE_ROW":case"SLIDE":case"TABLE_CELL":case"TEXT_PATH":case"TEXT":case"WIDGET":return 4;default:return(0,n.j)(e),4}}},235307:(e,t,r)=>{r.d(t,{$7:()=>l,B_:()=>s,QB:()=>i,Sv:()=>a,o8:()=>o});var n=r(966664);function i(e){return e.filter(Boolean).sort((e,t)=>e.label.localeCompare(t.label))}function a(e,t){return{...e,children:i([...t,...e.children])}}function s(e,t){return{label:e,value:t,children:[],expandByDefault:!1}}function l({label:e,value:t,list:r,generateChild:i,expandByDefault:a}){return{label:e,value:t??{type:"metadata",value:r.length},children:r.map((e,t)=>i(`[${t}]`,e,t)).filter(n.Vq),expandByDefault:a}}function o({label:e,value:t,object:r,generateChild:n,expandByDefault:a,showChildCount:s}){return{label:e,value:t??(s?{type:"metadata",value:Object.keys(r).length}:void 0),children:i(Object.entries(r).map(([e,t])=>n(e,t))),expandByDefault:a}}},255433:(e,t,r)=>{r.d(t,{R:()=>i});var n=r(761518);class i{constructor({name:e,sensitiveTextPolicy:t}){this.name=e,this.sensitiveTextPolicy=t}forEach(e,t){return(0,n.jJ)(this.rootObjects,"children",e,{...t,includeSelf:!0})}map(e,t){return(0,n.Tj)(this.rootObjects,"children",e,{...t,includeSelf:!0})}filter(e,t){return(0,n.pb)(this.rootObjects,"children",e,{...t,includeSelf:!0})}find(e,t){return(0,n.I6)(this.rootObjects,"children",e,{...t,includeSelf:!0})}some(e,t){return(0,n.zN)(this.rootObjects,"children",e,{...t,includeSelf:!0})}every(e,t){return(0,n.Si)(this.rootObjects,"children",e,{...t,includeSelf:!0})}count(e,t){return(0,n.U9)(this.rootObjects,"children",e,{...t,includeSelf:!0})}}},897069:(e,t,r)=>{r.d(t,{X:()=>c});var n=r(966664),i=r(396353),a=r(364898),s=r(632857),l=r(640855),o=r(235307);class c{constructor(){this.generateNodeLinkItem=(e,t)=>(0,o.B_)(e,{type:"nodeGuid",value:t,scene:this}),this.generateStyleLinkItem=(e,t)=>(0,o.B_)(e,{type:"styleId",value:t,scene:this}),this.generateVariableLinkItem=(e,t)=>(0,o.B_)(e,{type:"variableId",value:t,scene:this}),this.generateVariableCollectionLinkItem=(e,t)=>(0,o.B_)(e,{type:"variableCollectionId",value:t,scene:this}),this.generateNodeFieldItemValue=(e,t,r)=>{if((0,s.M_)(t,e))return{type:"blobIndex",value:t,scene:this};if((0,s.Lm)(t))return{type:"boolean",value:t};if((0,s.kf)(t))return{type:"numeric",value:t};if((0,s.Kg)(t))return("position"===e||"sortPosition"===e)&&(0,a.qO)(t)?{type:"position",value:t}:(0,s.SE)(t,e)?{type:"userInputtedText",value:t}:{type:"nonUserText",value:t};if((0,s._o)(t))return{type:"color",value:t};if((0,s.WX)(t))return{type:"vector",value:t};if((0,s.ar)(e)){let e=i.PK.fromKiwi(t);if(e)return{type:"styleId",value:e,scene:this}}if((0,s.r4)(e)){let e=i.gr.fromKiwi(t);if(e)return{type:"variableCollectionId",value:e,scene:this}}if((0,s.Ox)(e)){let e=i.sD.fromKiwi(t);if(e)return{type:"variableId",value:e,scene:this}}if((0,s.W_)(t))return(0,s.aP)(e,r)?{type:"nodeGuid",value:l.c1.fromKiwi(t),scene:this}:{type:"genericGuid",value:l.c1.fromKiwi(t)};if((0,s.hV)(t)){let{guids:e}=t;return e?{type:"guidPath",value:e.map(l.c1.fromKiwi).filter(n.Vq)}:{type:"error",value:"Invalid Fig.GUIDPath"}}return(0,s.OA)(t)?{type:"matrix",value:t}:(0,s.qx)(t,e)?{type:"imageHash",value:t}:(0,s.aY)(t)?{type:"bytes",value:t}:(0,s.Rt)(t)?{type:"editScope",value:t}:null},this.generateNodeFieldItem=(e,t,r)=>{if(null==t)return null;let n=this.generateNodeFieldItemValue(e,t,r);if(null!=n)return(0,o.B_)(e,n);if(Array.isArray(t))return(0,o.$7)({label:e,list:t,generateChild:(e,t)=>this.generateNodeFieldItem(e,t),expandByDefault:!1});{let r=["connectorStart","connectorEnd","symbolData"].includes(e);return(0,o.o8)({label:e,object:t,generateChild:(e,t)=>this.generateNodeFieldItem(e,t),expandByDefault:r})}}}generateNodeChangeItems(e){return(0,o.QB)(Object.entries(e).map(([e,t])=>this.generateNodeFieldItem(e,t)))}}},579616:(e,t,r)=>{r.d(t,{$:()=>i});var n=r(255433);class i extends n.R{get rootObjects(){return this.scene.rootNodes}getObject(e){return this.scene.getNodeById(e)}}},100874:(e,t,r)=>{r.d(t,{m:()=>s});var n=r(96328),i=r(752568),a=r(235307);class s{constructor(e,t){for(let[r,n]of(this.scene=e,this.ownFailuresById=new i.d,this.childrenWithFailuresById=new i.d,this.badgesById=new Map,this.propertiesById=new Map,t.entries())){let t=e.getNodeByGuid(r);t&&this.processEntry(t,n)}}generateBadges(e){let t=this.badgesById.get(e);if(t)return t;let r=[],i=this.ownFailuresById.get(e);if(i&&i.size>0){let e=i.size,t=`${(0,n.td)(e,"SceneGraph validation failure")} for this node: ${Array.from(i).join(", ")}`;r.push({type:"error",value:`${e}!`,title:t})}let a=this.childrenWithFailuresById.get(e);if(a&&a.size>0){let e=a.size,t=`${(0,n.td)(e,"SceneGraph validation failure")} in this node's descendants.`;r.push({type:"warning",value:`${e}!`,title:t})}return this.badgesById.set(e,r),r}generateProperty(e){return this.propertiesById.get(e)||(this.scene.getNodeById(e)?{label:"SceneGraph validation info",children:[(0,a.$7)({label:"Validation failures",list:Array.from(this.ownFailuresById.get(e)??[]),generateChild:(e,t)=>({key:t,label:"",value:{type:"error",value:t},children:[]})}),(0,a.$7)({label:"Children with validation failures",list:Array.from(this.childrenWithFailuresById.get(e)??[]),generateChild:this.scene.generateNodeLinkItem})]}:null)}processEntry(e,t){for(let r of t)this.ownFailuresById.add(e.id,r);for(let t=e.parent;t;t=t.parent)this.childrenWithFailuresById.add(t.id,e.guid)}}},645337:(e,t,r)=>{r.d(t,{G2:()=>S});var n=r(55253),i=r(140593),a=r(966664),s=r(922827),l=r(298455),o=r(966712),c=r(96328),u=r(678340),d=r(479118),h=r(273226),m=r(885456),g=r(2685),p=r(640855),f=r(235307),y=r(897069),E=r(579616),I=r(100874),b=r(785131);class S extends E.${constructor({name:e,sensitiveTextPolicy:t,type:r,pagesList:n,migrationVersion:i}){super({name:e,sensitiveTextPolicy:t}),this.type=r,this.pagesList=n,this.migrationVersion=i,this.scene=new v(this)}getSearch(){return this.scene.getSearch()}get metadata(){return{"Migration version":this.migrationVersion?.toString()}}setSceneGraphValidationInfo(e){this.sceneGraphValidationInfo=new I.m(this.scene,e)}setNodeWarnings(e){this.nodeWarnings=e}getAdditionalProperties(e){let t=[],r=this.sceneGraphValidationInfo?.generateProperty(e);if(r&&t.push(r),this.pagesList){let r=this.scene.getNodeById(e),n=r?.isPage?r:r?.containingPage;t.push({label:"Dynamic page loading info",children:(0,f.QB)([r&&n&&r!==n&&this.scene.generateNodeLinkItem("Containing page",n.guid),n&&(0,f.B_)("Page status",(()=>{switch((0,d.Fy)(this.pagesList,n.guid)){case s.xal.REQUESTED:return{type:"error",value:"Page loading in progress"};case s.xal.NOT_LOADED:return{type:"error",value:"Page not loaded due to incremental loading"};default:return{type:"nonUserText",value:"Page loaded"}}})())])})}let n=this.nodeWarnings?.get(e);return(n?.length??0)>0&&t.push((0,f.$7)({label:"Runtime warnings",list:n??[],generateChild:(e,t)=>({label:e,value:{type:"error",value:t.message},children:(0,f.QB)([(0,f.B_)("Severity",{type:"nonUserText",value:t.severity}),(0,f.B_)("Message",{type:"nonUserText",value:t.message}),void 0!==t.timestamp&&(0,f.B_)("Time",{type:"timestamp",value:t.timestamp}),t.filePath&&(0,f.B_)("File path",{type:"nonUserText",value:`${t.filePath}${t.lineNumber?`:${t.lineNumber}`:""}`}),t.data&&(0,f.o8)({label:"Data",object:t.data,generateChild:(e,t)=>(0,f.B_)(e,{type:"nonUserText",value:String(t)})})])})})),t}getAdditionalBadges(e){let t=[],r=this.sceneGraphValidationInfo?.generateBadges(e);r&&t.push(...r);let n=this.scene.getNodeById(e);if(n?.isPage&&this.pagesList)switch((0,d.Fy)(this.pagesList,n.guid)){case s.xal.LOADED:break;case s.xal.REQUESTED:t.push({type:"warning",value:"LOADING",title:"Page loading in progress"});break;case s.xal.NOT_LOADED:t.push({type:"warning",value:"NOT LOADED",title:"Page not loaded due to incremental loading"})}let i=this.nodeWarnings?.get(e),a=i?.length??0;return a>0&&t.push({type:"warning",value:`${a} WARNINGS`}),t}}class v extends y.X{constructor(e){super(),this.resource=e,this.nodesById=new Map,this.stylesById=new Map,this.variablesById=new Map,this.variableCollectionsById=new Map,this.searchDB=new b.H,this.isComplete=!0,this.totalMemoryUsage=this.rootNodes.reduce((e,t)=>e+t.treeMemoryUsage,0)}get document(){return this.rootNodes.find(e=>e.isDocument)}get pages(){return this.document.children}get internalCanvas(){return this.pages.find(e=>e.nodeChange.internalOnly)??null}get rootNodes(){return this.fetchNodesFromFullscreen(()=>s.Hcu.getRootNodes())}getNodeById(e){return this.getNodeFromCache(e)||this.fetchNodeFromFullscreen(()=>s.Hcu.getNode(D(e)))}getNodeByGuid(e){return this.fetchNodeFromFullscreen(()=>s.Hcu.getNodeByGuid(e))}getChildrenByParentGuid(e){return this.fetchNodesFromFullscreen(()=>s.Hcu.getChildrenByParentGuid(e))}getStyleByStyleId(e){return this.getStyleFromCache(e)||this.fetchNodeFromFullscreen(()=>s.Hcu.getStyle(e))}getVariableByVariableId(e){return this.getVariableFromCache(e)||this.fetchNodeFromFullscreen(()=>s.Hcu.getVariable(e))}getVariableCollectionByCollectionId(e){return this.getVariableCollectionFromCache(e)||this.fetchNodeFromFullscreen(()=>s.Hcu.getVariableCollection(e))}getStyleConsumers(e){return this.fetchNodesFromFullscreen(()=>s.Hcu.getStyleConsumers(e))}getConsumedStyles(e){return this.fetchNodesFromFullscreen(()=>s.Hcu.getConsumedStyles(D(e)))}getConsumedVariables(e){return this.fetchNodesFromFullscreen(()=>s.Hcu.getConsumedVariables(D(e)))}getVariablesInCollection(e){return this.fetchNodesFromFullscreen(()=>s.Hcu.getVariablesInCollection(e))}getNodesWithExplicitModeForVariableSet(e){return this.fetchNodesFromFullscreen(()=>s.Hcu.getNodesWithExplicitModeForVariableSet(e))}getVariableConsumers(e){return this.fetchNodesFromFullscreen(()=>s.Hcu.getVariableConsumers(e))}getDsaComponentCounts(e){let t=s.Hcu.getDsaComponentCounts(D(e));return{all:this.convertDsaAssetCounts(t.all),unnested:this.convertDsaAssetCounts(t.unnested)}}getDsaStyleCounts(e){let t=s.Hcu.getDsaStyleCounts(D(e));return{all:this.convertDsaAssetCounts(t.all),unnested:this.convertDsaAssetCounts(t.unnested)}}getDsaVariableCounts(e){let t=s.Hcu.getDsaVariableCounts(D(e));return{all:this.convertDsaAssetCounts(t.all),unnested:this.convertDsaAssetCounts(t.unnested)}}convertDsaAssetCounts(e){let t=[];for(let r of e){let e=this.createAndCacheNode(r.asset);e&&t.push({node:e,count:r.count})}return t.sort((e,t)=>t.count-e.count),t}getDirectVariableDependenciesToVariable(e){return this.fetchNodesFromFullscreen(()=>s.Hcu.getDirectVariableDependenciesToVariable(e))}getPropDefs(e){return s.Hcu.getPropDefs(D(e))}getCombinedPropAssignments(e){return s.Hcu.getCombinedPropAssignments(D(e))}getTransitiveDependencyPaths(e,t){return s.Hcu.getTransitiveDependencyPaths(D(e),t)}getAllOverridesForLayer(e){return s.Hcu.getLayerOverrides(D(e)).map(e=>({...e,fields:n.w.decodeMessage(e.fields).nodeChanges[0]}))}getAllSublayerInfoForImmutableFrame(e){return s.Hcu.getImmutableFrameSubLayerInfo(D(e))}getOverrideStash(e){return s.Hcu.getOverrideStash(D(e)).map(e=>({...e,overrides:e.overrides.map(e=>({...e,fields:n.w.decodeMessage(e.fields).nodeChanges[0]}))}))}getTextInsertionStyle(e){let t;let r=s.Hcu.getTextInsertionStyle(D(e));if(0===r.length)return null;try{t=n.w.decodeMessage(r).nodeChanges}catch(e){return console.warn("FigmaScope: error decoding node changes",e),null}return t?t.length>1?(console.warn("FigmaScope: more than one node change found for text insertion style"),null):t[0]:(console.warn("FigmaScope: buffer did not contain node changes"),null)}getBlobByIndex(e){return g.y}getNodeByKiwiOverridePath(e,t){let r=[e,...p.dB.fromKiwi(t)];return this.getNodeById(T(r))}get supportsNodePreviews(){switch(this.resource.type){case"editor":return!0;case"viewer":return!1;case"standalone":return"hide"!==this.resource.sensitiveTextPolicy}}getNodeFromCache(e){return this.nodesById.get(e)??null}getStyleFromCache(e){return this.stylesById.get(e)??null}getVariableFromCache(e){return this.variablesById.get(e)??null}getVariableCollectionFromCache(e){return this.variableCollectionsById.get(e)??null}fetchNodeFromFullscreen(e){let t=null;try{t=e()}catch(e){console.error("FigmaScope: error fetching nodes")}return t?this.createAndCacheNode(t):null}fetchNodesFromFullscreen(e){let t=[];try{t=e()}catch(e){console.error("FigmaScope: error fetching nodes")}return t.map(e=>this.createAndCacheNode(e)).filter(a.Vq)}createAndCacheNode(e){let t;try{t=n.w.decodeNodeChange(e.nodeChange)}catch(e){return console.error("FigmaScope: error decoding node changes",e),null}let r=p.dB.fromStrings(e.stablePath),i=T(r),a=this.nodesById.get(i);if(a)return a;let s=new C(i,{...e,nodeChange:t,stablePath:r},this);return this.nodesById.set(s.id,s),s.styleId&&this.stylesById.set(s.styleId,s),s.isVariable&&s.variableId&&this.variablesById.set(s.variableId,s),s.isVariableCollection&&s.variableCollectionId&&this.variableCollectionsById.set(s.variableCollectionId,s),"standalone"===this.resource.type&&s.isPrimaryInstance&&l.UN().get(s.guid)?.materializeDescendants(),s}getSearch(e){if(this._indexedSearchDB)return this._indexedSearchDB;let t=0,r=this.rootNodes,n=async()=>{await scheduler.postTask(async()=>{let i=Date.now();for(;Date.now()-i<100;){let n=r.pop();if(!n)return;e&&++t%5e3==0&&e(t),this.searchDB.indexObject(n),r.push(...n.children.filter(e=>e.guid))}await n()})},i=n().then(()=>this.searchDB);return this._indexedSearchDB=i}}class C extends m.E{constructor(e,t,r){super(e,t.nodeChange,r),this.id=e,this.data=t,this.scene=r}get type(){return this.isNestedInstance?"NESTED_INSTANCE":super.type}get parent(){return this.parentGuid?this.scene.getNodeByGuid(this.parentGuid):null}get children(){return this.scene.getChildrenByParentGuid(this.guid)}get consumedStyleIds(){return this.scene.getConsumedStyles(this.id).map(e=>e.styleId).filter(a.Vq)}get consumedStyles(){return this.scene.getConsumedStyles(this.id)}get consumedVariableIds(){return this.consumedVariables.map(e=>e.variableId).filter(a.Vq)}get consumedVariables(){return this.scene.getConsumedVariables(this.id)}get key(){return super.key??s.Egt?.getAssetKeyForPublish(this.guid)??null}get stablePath(){return this.data.stablePath}get isTracked(){return 1===this.stablePath.length}get isUntracked(){return this.stablePath.length>1}get containingTrackedNode(){return this.isTracked?this:this.parent?.containingTrackedNode??null}get isPrimaryInstance(){return this.isInstance&&this.isTracked}get containingInstance(){return this.findAncestor(e=>e.isInstance)}get containingPrimaryInstance(){return this.findAncestor(e=>e.isPrimaryInstance)}get containingImmutableFrame(){return this.findAncestor(e=>e.isImmutableFrame)}get isInstanceSublayer(){return null!=this.containingInstance}get isImmutableFrameSublayer(){return null!=this.containingImmutableFrame}get isNestedInstance(){return this.isInstance&&this.isInstanceSublayer}get isSwappedNestedInstance(){return this.isNestedInstance&&null!=this.nodeChange.overriddenSymbolID}get ownMemoryUsage(){return this._ownMemoryUsage=this._ownMemoryUsage??s.Hcu.getNodeMemoryUsage(this.stablePath)}get treeMemoryUsage(){return this._treeMemoryUsage=this._treeMemoryUsage??s.Hcu.getSubtreeMemoryUsage(this.stablePath)}generateDisplayProperties(){let e=super.generateDisplayProperties(),t=e.leftBadges.map(e=>"type"===e.type?{...e,tracked:this.isTracked}:e);return{...e,leftBadges:t,secondaryId:this.stablePath.length>1?p.dB.format(this.stablePath.slice(1)):this.overrideKey?p.c1.format(this.overrideKey):null,memoryFraction:(0,u.KV)(this.treeMemoryUsage,this.scene.totalMemoryUsage)}}generateRawProperties(){return[{label:"Tracked fields",children:super.generateRawProperties(),expandByDefault:!0},{label:"Untracked fields",children:this.generateNonKiwiFieldProperties(this.data.untrackedFields),expandByDefault:!0},{label:"Derived properties",children:this.generateNonKiwiFieldProperties(this.data.derivedProperties),expandByDefault:!0}]}generateTrackingInfoItem(){return(0,f.B_)("Node tracked",{type:"boolean",value:this.isTracked,sensitive:!1})}generateNonKiwiFieldProperties({jsonSerialized:e,stringSerialized:t}){let r=[];for(let[t,n]of Object.entries(e))null!=n&&r.push(this.scene.generateNodeFieldItem((0,c.zS)(t),n));for(let[e,n]of Object.entries(t))r.push({label:e,value:{type:"error",value:"No toJson() support"},children:[(0,f.B_)("Debug string",{type:"nonUserText",value:n,sensitive:!1})]});return r.filter(a.Vq)}generateComputedProperties(){let e=(0,f.QB)([...super.generateComputedProperties(),this.generateMemoryUsageItem(),this.generateTextInfoItem()]),t=this.generateNodePreviewItem();return t&&e.push(t),e}generateMemoryUsageItem(){return{label:"Memory usage",children:[(0,f.B_)("Own data",{type:"numeric",value:this.ownMemoryUsage}),(0,f.B_)("Tree data",{type:"numeric",value:this.treeMemoryUsage})],expandByDefault:!0}}generateDesignSystemsInfoItem(){return(0,f.Sv)(super.generateDesignSystemsInfoItem(),[this.generateComponentPropDefsItem(),this.generateComponentPropAssignmentsItem(),this.generateSymbolDependencyPathsItem(s.Uze.FROM),this.generateSymbolDependencyPathsItem(s.Uze.TO),this.generateLayerOverridesSection(),this.generateDsaSection()])}generateTextInfoItem(){if("TEXT"!==this.type)return null;let e=this.scene.getTextInsertionStyle(this.id);return{label:"Text info",children:(0,f.QB)([e&&(0,f.o8)({label:"Text insertion style",object:e,generateChild:this.scene.generateNodeFieldItem,showChildCount:!0})])}}generateNodePreviewItem(){return this.scene.supportsNodePreviews&&this.isRenderingNode&&!this.isStateGroup?{label:"Node preview",children:[(0,f.B_)("",{type:"nodeThumbnail",value:this.guidObj})]}:null}generateOverrideItem(e,t){let r=this.scene.getNodeByKiwiOverridePath(e.guid,t.guidPath??{});return{...super.generateOverrideItem(e,t),value:r?{type:"nodeGuid",value:r.guid,scene:this.scene}:void 0}}generateComponentPropDefsItem(){if(!this.isSymbol&&!this.isStateGroup)return null;let e=this.scene.getPropDefs(this.id),t=this.isState?this.parentGuid:null;return{label:"Component prop defs",children:e.map(e=>({label:p.c1.format(e.defID),value:{type:"userInputtedText",value:e.name,scene:this.scene},children:[(0,f.B_)("Is explicit",{type:"boolean",value:e.isExplicit}),(0,f.B_)("Default value",this.generateComponentPropValue(e.propType,e.defaultValue)),...this.generateComponentPropProperties(e,t)]}))}}generateComponentPropAssignmentsItem(){if(!this.isInstance)return null;let e=this.scene.getCombinedPropAssignments(this.id),t=this.backingStateGroup?.guid??null;return{label:"Component prop assignments (combined)",children:e.map(e=>({label:p.c1.format(e.assignmentID),value:{type:"userInputtedText",value:e.name,scene:this.scene},children:[(0,f.B_)("Value",this.generateComponentPropValue(e.propType,e.assignmentValue)),(0,f.B_)("Is mixed",{type:"boolean",value:e.isMixed}),...this.generateComponentPropProperties(e,t)]}))}}generateComponentPropProperties(e,t){let{error:r,propType:n,explicitDefID:i,refNodes:a}=e;return(0,f.QB)([!!r&&(0,f.B_)("Error",{type:"error",value:r}),!!n&&(0,f.B_)("Prop type",{type:"nonUserText",value:(0,h.xb)(n)}),!!i&&(0,f.B_)("Explicit def ID",{type:"genericGuid",value:p.c1.fromString(i)}),t&&this.scene.generateNodeLinkItem("Containing state group",t),(0,f.$7)({label:"Ref Nodes",list:a,generateChild:(e,t)=>this.generateRefNodeItem(e,t)})])}generateComponentPropValue(e,t){switch(e){case s.J0O.BOOL:return{type:"boolean",value:t.boolValue};case s.J0O.TEXT:return{type:"userInputtedText",value:t.textValue};case s.J0O.INSTANCE_SWAP:return{type:"nodeGuid",value:p.c1.fromString(t.instanceSwapValue),scene:this.scene};default:return t.untypedValue?{type:"nonUserText",value:t.untypedValue}:{type:"error",value:"Unknown prop type"}}}generateRefNodeItem(e,t){return{label:e,children:[this.scene.generateNodeLinkItem("Ref node",p.c1.fromString(t.refNodeGuid)),(0,f.B_)("Ref field",{type:"nonUserText",value:t.nodeField})],expandByDefault:!0}}generateSymbolDependencyPathsItem(e){return this.isPrimaryInstance||this.isSymbol?(0,f.$7)({label:e===s.Uze.FROM?"Symbol Dependencies":"Symbol Dependents",list:this.scene.getTransitiveDependencyPaths(this.id,e),generateChild:(t,{edges:r})=>({label:t,value:{type:"nodeGuid",value:p.c1.fromString(e===s.Uze.FROM?r[r.length-1].toGuid:r[0].fromGuid),scene:this.scene},children:1===r.length?this.generateSymbolDependencyProperties(r[0],!1):[(0,f.B_)("Type",{type:"nonUserText",value:"Transitive"}),(0,f.$7)({label:"Edges",list:r,generateChild:(e,t)=>({label:e,children:this.generateSymbolDependencyProperties(t,!0),expandByDefault:!0}),expandByDefault:!0})]})}):this.isStateGroup?(0,f.$7)({label:e===s.Uze.FROM?"Symbol dependencies by state":"Symbol dependents by state",list:this.children,generateChild:(t,r)=>({...r.generateSymbolDependencyPathsItem(e),label:`State ${t}`,value:{type:"nodeGuid",value:r.guid,scene:this.scene}})}):null}generateSymbolDependencyProperties({fromGuid:e,toGuid:t,type:r,pathToOverride:n,propDefId:a},l){let o=[(0,f.B_)("Type",{type:"nonUserText",value:(()=>{switch(r){case s.SoG.PRIMARY_INSTANCE_BACKED_BY_SYMBOL:return"Primary instance backed by symbol";case s.SoG.PRIMARY_INSTANCE_WITH_NESTED_SWAP_TO_SYMBOL:return"Primary instance with nested swap to symbol";case s.SoG.PRIMARY_INSTANCE_WITH_TOP_LEVEL_PROP_ASSIGNMENT_TO_SYMBOL:return"Primary instance with top level prop assignment to symbol";case s.SoG.PRIMARY_INSTANCE_WITH_NESTED_PROP_ASSIGNMENT_TO_SYMBOL:return"Primary instance with nested prop assignment to symbol";case s.SoG.PRODUCT_COMPONENT_WITH_PROP_DEF_TO_SYMBOL:return"Product component with prop def to symbol";case s.SoG.STATE_WITH_PROP_DEF_TO_SYMBOL:return"State with prop def to symbol";case s.SoG.SYMBOL_CONTAINING_PRIMARY_INSTANCE:return"Symbol containing primary instance";case s.SoG.INVALID:return"Invalid";default:(0,i.xb)(r)}})()})];return l&&(o.push(this.scene.generateNodeLinkItem("From",p.c1.fromString(e))),o.push(this.scene.generateNodeLinkItem("To",p.c1.fromString(t)))),n.length>1&&o.push((0,f.B_)("Path to override",{type:"guidPath",value:p.dB.fromStrings(n)})),a&&p.c1.isValid(a)&&o.push((0,f.B_)("Prop def id",{type:"genericGuid",value:p.c1.fromString(a)})),o}generateLayerOverridesSection(){if(!this.isInstance&&!this.isInstanceSublayer)return null;let e=this.scene.getAllOverridesForLayer(this.id),t={};for(let{primaryInstanceId:r,containingSymbolId:n,fields:i,savedLevel:a,inheritanceLevel:s}of e)for(let[e,l]of Object.entries(i))t[e]=t[e]||[],t[e][s]={primaryInstanceId:r,containingSymbolId:n,value:l,savedLevel:a};let r=Object.keys(t).sort();return 0===r.length?null:(0,f.$7)({label:"Layer overrides",list:r,expandByDefault:!1,generateChild:(e,r)=>{let n=t[r],i=n.findIndex(a.Vq),s=n[i].value;return{label:r,value:{type:"metadata",value:0===i?"Direct override":"Inherited override"},expandByDefault:!1,children:[{...this.scene.generateNodeFieldItem(r,s),label:"Resolved value"},{label:"Sources",expandByDefault:!1,children:(0,f.QB)(n.map(({primaryInstanceId:e,containingSymbolId:t,value:n,savedLevel:i},a)=>({label:0===a?"Direct override":"Inherited from",key:`Level ${a}`,value:t?{type:"nodeGuid",value:p.c1.fromString(t),scene:this.scene}:void 0,children:(0,f.QB)([{...this.scene.generateNodeFieldItem(r,n),label:"Value"},i>0&&(0,f.B_)("Saved level",{type:"numeric",value:i}),this.scene.generateNodeLinkItem("Primary instance",p.c1.fromString(e))])})))}]}}})}generateDsaSection(){if(!(0,o.kc)().dsa_figmascope)return null;let e=this.scene.getDsaComponentCounts(this.id),t=this.scene.getDsaStyleCounts(this.id),r=this.scene.getDsaVariableCounts(this.id);return{label:"Design system analyltics",children:[{label:"Components",children:[{label:"All",children:this.generateDsaComponentCounts(e.all)},{label:"Unnested",children:this.generateDsaComponentCounts(e.unnested)}]},{label:"Styles",children:[{label:"All",children:this.generateDsaStyleCounts(t.all)},{label:"Unnested",children:this.generateDsaStyleCounts(t.unnested)}]},{label:"Variables",children:[{label:"All",children:this.generateDsaVariableCounts(r.all)},{label:"Unnested",children:this.generateDsaVariableCounts(r.unnested)}]}]}}generateDsaComponentCounts(e){return e.filter(({node:e})=>!!e.guid).map(({node:e,count:t})=>({label:e.name,key:e.id,value:{type:"metadata",value:t},children:[this.scene.generateNodeLinkItem("node",e.guid),(0,f.B_)("count",{type:"numeric",value:t})]}))}generateDsaStyleCounts(e){return e.filter(({node:e})=>!!e.styleId).map(({node:e,count:t})=>({label:e.name,key:e.id,value:{type:"metadata",value:t},children:[this.scene.generateStyleLinkItem("style",e.styleId),(0,f.B_)("count",{type:"numeric",value:t})]}))}generateDsaVariableCounts(e){return e.filter(({node:e})=>!!e.variableId).map(({node:e,count:t})=>({label:e.name,key:e.id,value:{type:"metadata",value:t},children:[this.scene.generateVariableLinkItem("var",e.variableId),(0,f.B_)("count",{type:"numeric",value:t})]}))}}function T(e){return p.SW.fromString(e.join(";"))}function D(e){return p.dB.fromStrings(e.split(";"))}},785131:(e,t,r)=>{r.d(t,{U:()=>m,H:()=>h});var n=r(677469),i=r.n(n),a=r(776250),s=r(852438);let l={id:["nodeId"],guid:[],parentGuid:["parent","parentId"],type:["nodeType"],field:["property"],phase:[],overrideKey:["okey"],backingSymbolId:["symbol","symbolId"],consumedStyleIds:["consumedStyleId","consumedStyle","consumedStyles"],name:[],text:[],key:[],version:["assetVersion","sharedSymbolVersion"],publishId:[],imageHashes:[],symbolId:["symbol"],stateGroupId:["stateGroup"],styleId:["style"],variableId:["variable"],variableCollectionId:["variableSetId","collectionId","variableCollection","variableSet"],editScopeLabel:["editScope"],startSequenceNumber:["start","startSequence"],endSequenceNumber:["end","endSequence"],userId:["user"],createdAt:["created","date","time"]};var o=r(752568);class c{constructor(){this.children=new Map,this.value=[]}}class u{constructor(){this.root=new c}insert(e,t){let r=this.root;for(let t=0;t<e.length;t++){let n=e.charAt(t),i=r.children.get(n);i||r.children.set(n,i=new c),r=i}r.value.push(t)}prefixFind(e){let t=[];for(let r of this.keysWithPrefix(e)){let e=this.find(r);if(e)for(let r of e)t.push(r)}return t}find(e){let t=this.root;for(let r=0;r<e.length;r++){let n=e.charAt(r),i=t.children.get(n);if(!i)return;t=i}return t.value}keysWithPrefix(e){let t=[],r=this.findNode(e);return this.collect(r,function(e){let t=[];for(let r=0;r<e.length;r++){let n=e.charAt(r);t.push(n)}return t}(e),t),t}collect(e,t,r){if(e)for(let n of(e.value.length>0&&r.push(t.join("")),Array.from(e.children.keys())))t.push(n),this.collect(e.children.get(n),t,r),t.pop()}findNode(e){let t=this.root;for(let r=0;r<e.length;r++){let n=e.charAt(r),i=t.children.get(n);if(!i)return;t=i}return t}}class d{constructor({property:e,aliases:t=[]}){this.trie=new u,this.exactMatches=new o._,this.property=e,this.aliases=t}search({value:e,isExact:t}){let r=this.exactMatches.get(e);if(t)return r;let n=this.trie.prefixFind(e.toLowerCase()).filter(e=>!r.some(t=>t.object===e.object));return[...r,...n]}indexObject(e){let t=e.searchProperties[this.property];if(t){if(Array.isArray(t))for(let r of t)this.indexValue(r,e);else this.indexValue(t,e)}}indexValue(e,t){this.exactMatches.add(e,{value:e,object:t,property:this.property,isExact:!0}),this.trie.insert(e.toLowerCase(),{value:e,object:t,property:this.property,isExact:!1})}}class h{constructor(){this.indices=Object.entries(l).map(([e,t])=>new d({property:e,aliases:t}))}indexObject(e){for(let t of this.indices)t.indexObject(e)}indexObjects(e){for(let t of this.indices)for(let r of e)t.indexObject(r)}searchWithText(e){return this.search(function(e){let t,r=[];e=e.trim();let n=/([a-zA-Z0-9_.]+=)?("[^"]*"|'[^']*'|[^\s]+)/g;for(;t=n.exec(e);){var i;let e=t[1]?.slice(0,-1)||void 0,{value:n,isExact:a}=(i=t[2]).startsWith("'")&&i.endsWith("'")||i.startsWith('"')&&i.endsWith('"')?{value:i.slice(1,-1),isExact:!0}:{value:i,isExact:!1};r.push({property:e,value:n,isExact:a})}return r.length>1&&(r=function(e){let t=[],r=e[0],n=e[1],i=2;for(;;)if(n)r.property||n.property||r.isExact||n.isExact?(t.push(r),r=n):r={property:void 0,value:`${r.value} ${n.value}`,isExact:!1},n=e[i++];else{t.push(r);break}return t}(r)),r}(e))}searchWithProperties(e){return this.search(function(e){let t=[];for(let[r,n]of Object.entries(e))if(n){if(Array.isArray(n))for(let e of n)t.push({property:r,value:e,isExact:!0});else t.push({property:r,value:n,isExact:!0})}return t}(e))}search(e){let t;for(let r of(a.az.trackDefinedEvent("figmascope.search",{used_operators:e.length>1||e[0]?.property!=null}),e)){let e=new Map;for(let t of this.getIndicesToSearchForToken(r))for(let n of t.search(r)){let{object:t,...r}=n;e.has(t)?e.get(t).matches.push(r):e.set(t,{object:t,matches:[r]})}t=t?(0,s.wD)(t,e,(e,t,r)=>({object:e,matches:t.matches.concat(r.matches)})):e}return t?i()(Array.from(t.values())).sort(g):[]}getIndicesToSearchForToken({property:e}){return null==e?this.indices.filter(e=>"parentGuid"!==e.property):(e=e.toLowerCase(),this.indices.filter(t=>{if(t.property.toLowerCase()===e)return!0;for(let r of t.aliases)if(r.toLowerCase()===e)return!0;return!1}))}}class m{constructor(e){this.dbs=e}searchWithText(e){return i()(this.dbs.map(t=>t.searchWithText(e))).sort(g)}searchWithProperties(e){return i()(this.dbs.map(t=>t.searchWithProperties(e))).sort(g)}}function g(e,t){let r=e.matches.filter(e=>e.isExact).length;return t.matches.filter(e=>e.isExact).length-r||t.matches.length-e.matches.length}},617520:(e,t,r)=>{r.d(t,{Cc:()=>c,lX:()=>u,lu:()=>l});var n=r(966159),i=r(38580),a=r(288706),s=r(586459);let l=(0,i.eU)((0,n.Ok)()),o=(0,i.eU)(e=>{let t=e(l);if(t.status!==s.r.SUCCESS)throw Error("FigmaScope internal code is running but no FigmaScope resources are set. This is a bug - please report in #figmascope.");return t.value}),c=(0,a.mg)(o,e=>e.primaryResource),u=(0,a.mg)(o,e=>e.diffResource)},506563:(e,t,r)=>{r.d(t,{e:()=>n});let n="https://go/figmascope-docs"},749070:(e,t,r)=>{r.d(t,{rf:()=>s,tV:()=>l,zG:()=>a});var n=r(411855),i=r(501114);function a(){return n.createElement(l,null,n.createElement("p",null,"Reading file..."))}function s({error:e}){let t="Oops! Something went wrong";return"string"==typeof e?t=e:e instanceof Error&&(t=e.message,console.error(e)),n.createElement(l,null,n.createElement("p",{style:i.sx.colorTextOndanger.colorBgDanger.p16.font20.maxW400.$},t))}function l({children:e}){return n.createElement("div",{style:i.sx.fillPositionedContainer.flex.itemsCenter.justifyCenter.flexColumn.lh1_5Lines.font16.$},e)}},512674:(e,t,r)=>{r.d(t,{J:()=>r2});var n=r(411855),i=r(723215),a=r(776250),s=r(189430),l=r(374626),o=r(646240),c=r(498750),u=r(586459),d=r(154254),h=r(501114),m=r(175290),g=r(809840),p=r(841563),f=r.n(p),y=r(38580),E=r(617520),I=r(188507),b=r(44948),S=r(738269),v=r(356390),C=r(611978),T=r(640855),D=r(799507),N=r(645337),x=(e=>(e.Position="Position",e.Name="Name",e.Memory="Memory",e.NodeId="Node ID",e))(x||{}),P=(e=>(e.Search="Search",e.Filter="Filter",e))(P||{});let A=(0,l.E3)("figmascope-settings",{});function O(e,t){return(0,y.eU)(r=>r(A)[e]??t,(t,r,n)=>r(A,t=>({...t,[e]:n})))}let{valueAtom:_,undoAtom:B,redoAtom:L,historyAtom:w}=(0,l.xP)(T.SW.fromString("0:0")),F=(0,y.eU)(e=>{let t=e(E.Cc),r=e(_);return t.getObject(r)}),R=O("followSelection",!1);function k({children:e,appSelection:t,setAppSelection:r}){let i=(0,l.md)(E.Cc);return r&&i instanceof N.G2?n.createElement($,{resource:i,appSelection:t,setAppSelection:r},e):n.createElement(n.Fragment,null,e,n.createElement(V,null))}function V(){let e=(0,I.wA)(),t=(0,C._6)(),[r,i]=(0,l.fp)(_),a=n.useRef(!0);return n.useEffect(()=>{(0,D.E)(t)&&(a.current?(a.current=!1,t.selection&&i(T.SW.fromString(t.selection))):r!==t.selection&&e(S.$T({...t,selection:r})))},[t,r,i,e]),null}let M=n.createContext({selectInApp:void 0,canSelectInApp:void 0});function $({resource:e,appSelection:t,setAppSelection:r,children:i}){let a=e.scene,s=(0,l.md)(R),[o,c]=(0,l.fp)(_),u=n.useCallback(e=>{let t=a.getNodeByGuid(T.c1.fromString(e));t&&c(t.id)},[c,a]);n.useEffect(()=>{v.Y5.setFigmascopeSelectedGuidCallback(u)},[u]);let d=o?a.getNodeById(o):null,h=(0,b.k9)(()=>d?U(d):null,[d]);n.useEffect(()=>{s&&r&&h&&r(h)},[s,r,h]),n.useEffect(()=>{s&&t?.guid&&u(t.guid)},[s,t?.guid,u]);let m=n.useMemo(()=>({canSelectInApp:e=>!!U(e),selectInApp:e=>{let t=U(e);t&&r(t)}}),[r]);return n.createElement(M.Provider,{value:m},i)}function U(e){if(!e.isInternalOnly)return{selectionType:"canvas",guid:e.guid};if(e.isStyle&&e.isLocalAsset){let t=e.nodeChange.styleType;if(t)return{selectionType:"local_style",guid:e.guid,styleType:t}}return null}var G=(e=>(e.None="No Diff",e.Layer="Layer Diff",e.Tree="Tree Diff",e.Full="Full Diff",e))(G||{});function j(e){return"Layer Diff"===e?"layer":"tree"}let H=(0,l.FZ)((0,y.eU)(null),(e,t,r)=>{let n,i;let s=new Date;if("clear"===t.type)return e&&a.az.trackDefinedEvent("figmascope.diff_end",{type:j(e.type),duration_seconds:(s.getTime()-e.time.getTime())/1e3}),null;if("start"===t.type?(n=t.id,i=t.diffType):"refresh"===t.type&&e&&(n=e.object.id,i=e.type),!n||!i)return null;let l=r(E.Cc).getObject(n)?.freeze();return l?(a.az.trackDefinedEvent("figmascope.diff_start",{type:j(i)}),{type:i,object:l,time:new Date}):null}),Y=(0,y.eU)(e=>{let t=e(E.lX);return t?{type:"Full Diff",resource:t}:e(H)??{type:"No Diff"}}),K=(0,y.eU)(e=>{let t=e(_),r=e(Y);switch(r.type){case"Layer Diff":return r.object;case"Tree Diff":return r.object.findDescendant(e=>e.id===t,{includeSelf:!0})??null;case"Full Diff":for(let e of r.resource.rootObjects){let r=e.findDescendant(e=>e.id===t,{includeSelf:!0});if(r)return r}return null;default:return null}});function W(e,t,r=!1){return!e&&t?"REMOVED":!t&&e?"CREATED":e?.value&&t?.value&&(e.value.type!==t.value.type||!f()(e.value.value,t.value.value))?"MODIFIED":r?"CHILD_MODIFIED":void 0}var z=r(966159),X=r(27087),J=r(752568),q=(e=>(e[e.Fetched=0]="Fetched",e[e.Fetching=1]="Fetching",e[e.NeverFetched=2]="NeverFetched",e))(q||{});let Q=(0,y.eU)(e=>{let t=e(C.OC);return"fullscreen"===t.view?`/api/file/scenegraph_validations/${t.fileKey}`:(0,D.E)(t)&&t.urlParams?.type==="server_file"?`/api/admin/scenegraph_validations/${t.urlParams.key}`:null}),Z=(0,y.eU)(e=>null!=e(Q)),ee=(()=>{let e=(0,y.eU)((0,z.Ok)());return(0,y.eU)(t=>t(e),async(t,r)=>{let n;if(t(e).status===u.r.LOADING)return;let i=t(Q);if(i){r(e,(0,z.ux)());try{n=await et(i)}catch(t){r(e,(0,z.uW)(t));return}r(e,(0,z.NY)(n))}})})();async function et(e){let t=await (0,X.GD)(e),r=new J._;for(let e of t.data.meta.data.results.violations)if("always-fail-for-testing"!==e.name)for(let t of e.instances)r.add(t.guid,t.message);return r}var er=r(749070),en=r(457473),ei=r(806247),ea=r(561546),es=r(922827),el=r(461816),eo=r.n(el);function ec(e,t,r){let n={...e},i=!1;for(let e of t)i=i||n[e]!==r,n[e]=r;return i?n:e}function eu(e,t){let r={...e},n=!1;for(let e of t)n=n||e in r,delete r[e];return n?r:e}var ed=(e=>(e[e.No=0]="No",e[e.Yes=1]="Yes",e))(ed||{});function eh(e,t,r,n=1){let i=[t,...r];return e[t]?n?eu(e,i):ec(e,i,!1):ec(e,i,!0)}function em(e){return function(e=1,t=(0,y.eU)({})){return(0,y.eU)(e=>e(t),(r,n,i,a)=>{n(t,eh(r(t),i,a??[],e))})}(0,(0,y.eU)(t=>t(A)[e]??{},(t,r,n)=>r(A,t=>({...t,[e]:n}))))}let eg=em("middlePanelExpandedProperties"),ep=em("middlePanelPinnedProperties"),ef=em("rightPanelExpandedProperties"),ey=em("rightPanelPinnedProperties");function eE(e,t,r){return[...e.getObject(r)?.mapDescendants(e=>e.id)??[],...t?.getObject(r)?.mapDescendants(e=>e.id)??[]]}let eI=(0,l.FZ)((0,y.eU)({}),(e,t,r)=>{let n=r(E.Cc),i=r(E.lX);switch(t.type){case"toggleExpanded":return eh(e,t.objectId,t.toggleSubtree?eE(n,i,t.objectId):[]);case"expandAncestors":return ec(e,function(e,t,r){return[...e.getObject(r)?.mapAncestors(e=>e.id)??[],...t?.getObject(r)?.mapAncestors(e=>e.id)??[]]}(n,i,t.objectId),!0);case"expandDescendants":return ec(e,[t.objectId,...eE(n,i,t.objectId)],!0);case"collapseDescendants":return eu(e,[t.objectId,...eE(n,i,t.objectId)])}});var eb=r(966664),eS=r(297666);let ev=(0,y.eU)({status:"initial"}),eC=(0,y.eU)(0),eT=(0,y.eU)(!1),eD=(0,y.eU)(e=>{if(e(eT)){let t=e(eC);return`Indexing search results (this may take a moment)... [${t}/???]`}return null}),eN=O("searchMode",P.Search),ex=(0,y.eU)(e=>{let t=e(ev),r=e(E.Cc),n=e(w);return"initial"===t.status?n.map(e=>r.getObject(e)).filter(eb.Vq).map(e=>({object:e,matches:[]})).reverse():"results"in t&&t.results.length>0?t.results:null}),eP=(0,y.eU)(e=>{let t=e(ev);if("searching"===t.status&&0===t.results.length){let t=["Searching..."],r=e(eD);return r&&t.push(r),t}if("success"===t.status&&0===t.results.length){let t=["No results found."],r=e(E.Cc);return r instanceof N.G2&&t.push("Some content may be unavailable because of incremental loading"),"hide"===r.sensitiveTextPolicy&&t.push("Searching text fields is limited beacuse text redaction has been applied."),t}return"error"===t.status?["Error searching:",String(t.error)]:null}),eA=(0,y.eU)(e=>{if(e(eN)!==P.Filter)return null;let t=e(ev);return"results"in t?t.results.map(e=>e.object):null}),eO=(0,y.eU)(e=>{if(e(eN)!==P.Filter)return null;let t=e(eP);return t?t.join(" "):null}),e_=O("sortOrder",x.Position),eB=(0,y.eU)(e=>{let t=[x.Position,x.Name,x.NodeId];return e(E.Cc).rootObjects[0]?.displayProperties.memoryFraction!=null&&t.push(x.Memory),t.sort(),t}),eL=(0,y.eU)(e=>{switch(e(e_)){case x.Position:return eF;case x.Name:return ew;case x.Memory:return ek;case x.NodeId:return eR}});function ew(e,t){return e.displayProperties.name.localeCompare(t.displayProperties.name)}function eF(e,t){let[r,n]=eV(e,t);if(r&&n){let e=r.parentIndex?.position,t=n.parentIndex?.position;if(null==e&&null==t)return 0;if(null==t)return 1;if(null==e)return -1;if(e<t)return -1;else if(e>t)return 1}return ew(e,t)}function eR(e,t){let[r,n]=eV(e,t);if(r&&n){let{sessionID:e,localID:t}=r.guid??{localID:-1,sessionID:-1},{sessionID:i,localID:a}=n.guid??{localID:-1,sessionID:-1};return e-i||t-a}return eF(e,t)}function ek(e,t){return(t.displayProperties.memoryFraction??0)-(e.displayProperties.memoryFraction??0)||eF(e,t)}function eV(e,t){return"nodeChange"in e&&"nodeChange"in t?[e.nodeChange,t.nodeChange]:[null,null]}var eM=r(331221),e$=r(602881),eU=r(397565);function eG({badges:e}){return n.createElement(m.Y,{width:"hug-contents"},e.map((e,t)=>n.createElement(ej,{key:t,badge:e})))}function ej({badge:e}){switch(e.type){case"type":return n.createElement(e1,{type:e.value,tracked:e.tracked});case"phase":return n.createElement(e3,{phase:e.value});case"change":return n.createElement(e5,{type:e.value});case"editType":return n.createElement(tt,{type:e.value});default:return n.createElement(tn,{...e})}}let eH=d.cx.px4.minW10.inlineBlock.bRadius4.h16.flex.alignCenter.justifyCenter.fontSemiBold,eY=eH.colorBgSecondary.colorText.$,eK=eH.colorBgBrandSecondary.colorTextOnbrand.$,eW=eH.colorBgBrand.colorTextOnbrand.$,ez=eH.colorBgSuccess.colorTextOnsuccess.$,eX=eH.colorBgWarning.colorTextOnwarning.$,eJ=eH.colorBgDanger.colorTextOndanger.$,eq=eH.minW28.w28.colorBg.b1.h14,eQ={[eU.SP.Editor]:eq.colorBorderDesign.colorTextDesignSecondary.$,[eU.SP.DesignSystems]:eq.colorBorderComponent.colorTextComponent.$,[eU.SP.FigJam]:eq.colorBorderFigjam.colorBorderFigjam.$,[eU.SP.Page]:eq.colorBorder.colorText.$,[eU.SP.Other]:eq.colorBorderSuccess.colorTextSuccessSecondary.$},eZ={fontSize:9,lineHeight:"16px",fontStyle:"normal"},e0={fontSize:9,lineHeight:"14px",fontStyle:"normal"};function e1({type:e,tracked:t=!0}){return n.createElement("div",{title:`${e}${t?" (tracked)":" (untracked)"}`,className:eQ[(0,eU.p7)(e)],style:{...e0,...t?{}:{borderStyle:"dashed"}}},eU.uy[e])}let e6={CREATED:ez,MODIFIED:eK,CHILD_MODIFIED:eW,REMOVED:eJ};function e5({type:e}){return n.createElement("div",{title:e,className:e6[e],style:eZ},eM.x[e])}let e4=eH.minW24.w24.colorBg.b1.h14,e7={CREATED:e4.colorBorderSuccess.colorTextSuccessSecondary.$,MODIFIED:e4.colorBorderBrand.colorTextBrandSecondary.$,REMOVED:e4.colorBorderDanger.colorTextDangerSecondary.$};function e3({phase:e}){return n.createElement("div",{title:e,className:e7[e],style:e0},eM.z[e])}let e2=eH.minW28.w28.colorBg.b1.h14,e8=e2.colorBorderComponent.colorTextComponent.$,e9=e2.colorBorderComponent.colorTextComponentTertiary.$,te=e2.colorBorderWarning.colorTextWarning.$;function tt({type:e}){return n.createElement("div",{title:`Edit scope type: ${e}`,className:"MIXED"===e?e9:e$.YY.has(e)?e8:te,style:e0},e$.nP[e])}let tr={info:eY,warning:eX,error:eJ};function tn({type:e,value:t,title:r}){return n.createElement("div",{title:r,className:tr[e],style:eZ},t)}var ti=r(396353),ta=r(629019),ts=r.n(ta),tl=r(686759);let to="badge_display--canUnderline--aufN5";function tc({id:e}){let t=(0,l.md)(E.Cc),r=(0,l.md)(E.lX),i=t.getObject(e)??r?.getObject(e)??null;return n.createElement(tb,{target:i,text:e,errorIfMissing:!0})}function tu({guid:e,scene:t}){let r=t.getNodeByGuid(e);return n.createElement(tb,{target:r,errorIfMissing:t.isComplete,text:T.c1.format(e)})}function td({styleId:e,scene:t}){let r=t.getStyleByStyleId(e);return n.createElement(tb,{target:r,errorIfMissing:t.isComplete,text:(0,T.r4)(e,ti.PK),fullText:ti.PK.toString(e)})}function th({variableId:e,scene:t}){let r=t.getVariableByVariableId(e);return n.createElement(tb,{target:r,errorIfMissing:t.isComplete,text:(0,T.r4)(e,ti.sD),fullText:ti.sD.toString(e)})}function tm({variableCollectionId:e,scene:t}){let r=t.getVariableCollectionByCollectionId(e);return n.createElement(tb,{target:r,errorIfMissing:t.isComplete,text:(0,T.r4)(e,ti.gr),fullText:ti.gr.toString(e)})}function tg({id:e,secondary:t}){return n.createElement(tS,{colorStyle:t?2:1,text:e,isValid:!0})}function tp({guid:e}){return n.createElement(tS,{colorStyle:1,text:T.c1.format(e),isValid:T.c1.isValid(e)})}function tf({guidPath:e}){return n.createElement(tS,{colorStyle:1,text:T.dB.format(e),isValid:T.dB.isValid(e)})}var ty=(e=>(e[e.Invalid=0]="Invalid",e[e.Normal=1]="Normal",e[e.Seconary=2]="Seconary",e[e.Link=3]="Link",e))(ty||{});let tE=d.cx.inlineBlock,tI={0:tE.colorTextDanger.$,1:tE.colorText.fontSemiBold.$,2:tE.colorTextSecondary.$,3:tE.colorTextFigjam.fontSemiBold.$};function tb({target:e,text:t,errorIfMissing:r,fullText:i}){let a=(0,o.Xr)(_);return null==e?n.createElement(tS,{colorStyle:r?0:3,text:t,copyOnClickText:i,isValid:!1}):n.createElement("span",{role:"button",className:ts()(d.cx.inlineBlock.$,"badge_display--guidLink--3Avjv"),onClick:()=>a(e.id)},n.createElement(m.Y,{spacing:4},n.createElement(eG,{badges:e.displayProperties.leftBadges}),n.createElement("span",{className:ts()(tI[3],to)},t),n.createElement("span",{className:ts()(tI[3],to,d.cx.fontNormal.$)},e.displayProperties.name)))}function tS({colorStyle:e,text:t,copyOnClickText:r,isValid:i}){let a=tI[i?e:0];return null==r?n.createElement("span",{className:a},t):n.createElement("span",{className:a,role:"button",onClick:()=>{(0,tl.Dk)(r).then(()=>window.alert(`Copied ${r} to clipboard`)).catch(()=>window.alert(r))}},t)}var tv=r(602126),tC=r(268537),tT=r(939863),tD=r(885456);let tN=tC.ms,tx=tC.c$,tP=tC.wv;function tA({contextMenuData:{objectId:e,position:t},onClose:r}){let{canSelectInApp:i,selectInApp:a}=n.useContext(M),s=n.useRef(null);(0,tv.ww)(s,r);let c=(0,l.md)(E.Cc).getObject(e),u=c instanceof tD.E?c:null,[d,m]=(0,l.fp)(H),g=(0,o.Xr)(eI);if(null==c)return null;let p=e=>()=>{e(),r()},f=c.children.length>0,y=(()=>{if(i?.(c))return p(()=>a(c))})(),I=u&&(u.isInternalOnly||"DOCUMENT"===u.nodeType||"CANVAS"===u.nodeType),b=e=>p(()=>es.glU.triggerAction(e,{guid:c.id})),S=d?.object.id===c.id;return n.createElement(tN,{style:{...h.sx.fixed.$,...t}},n.createElement("div",{ref:s},y&&n.createElement(tx,{onClick:y},"Jump to node"),f&&n.createElement(tx,{onClick:p(()=>g({type:"expandDescendants",objectId:e}))},"Expand descendants"),f&&n.createElement(tx,{onClick:p(()=>g({type:"collapseDescendants",objectId:e}))},"Collapse descendants"),(y||f)&&n.createElement(tP,null),S&&n.createElement(tx,{onClick:p(()=>m({type:"clear"}))},"Stop diffing against this node"),(!S||d?.type!==G.Layer)&&n.createElement(tx,{onClick:p(()=>m({type:"start",diffType:G.Layer,id:e}))},"Layer diff against this node"),(!S||d?.type!==G.Tree)&&n.createElement(tx,{onClick:p(()=>m({type:"start",diffType:G.Tree,id:e}))},"Tree diff against this node"),!I&&n.createElement(tP,null),!I&&y&&u&&"DOCUMENT"!==u.type&&"CANVAS"!==u.type&&n.createElement(tx,{onClick:b("debug-print-as-test-code")},(0,tT.tx)("fullscreen_actions.debug-print-as-test-code")),!I&&y&&u&&"VECTOR"===u.type&&n.createElement(tx,{onClick:b("debug-print-vector-network-as-test-code")},(0,tT.tx)("fullscreen_actions.debug-print-vector-network-as-test-code"))))}var tO=r(358145),t_=r(723325),tB=r(904794);let tL=n.createContext(()=>!1);function tw({children:e,className:t,style:r}){let i=n.useRef(null),a=n.useCallback(()=>!!i.current?.contains(document.activeElement),[]);return n.createElement(t_.dP,{ref:i,className:t,style:r,allowVim:!0},n.createElement(tL.Provider,{value:a},e))}let tF="tree_row--expansionToggle--mYjsb";function tR({children:e,changeType:t,isExpanded:r,isLeaf:i,isPinned:a,isSelected:s,isChanging:l,indent:o,style:c,keyboardNavigationPath:u,toggleExpanded:d,togglePinned:h,select:m,onContextMenu:g,onMouseEnter:p,onMouseLeave:f}){let{setKeyboardNavigationElement:y,keyboardNavigationItem:E,isFocused:I}=(0,t_.M3)({path:u}),b=n.useContext(tL),S=(0,tO.ZC)(s);n.useEffect(()=>{!S&&s&&!I&&b()&&E?.focus()},[I,S,s,E,b]);let v=n.useRef(!1),C=n.useCallback(e=>e.target instanceof Element&&"BUTTON"===e.target.tagName,[]),T=n.useCallback(e=>!!(e.target instanceof Element&&(e.target.classList.contains(tF)||e.target.parentElement?.classList.contains(tF))),[]);return n.createElement("button",{ref:y,style:c,className:ts()("tree_row--treeItem--6gIYH",{"tree_row--selected--url1U":s||I,"tree_row--changing--E9CSm":l}),onFocus:m,onMouseDown:e=>{(C(e)||T(e))&&e.detail>1&&e.preventDefault(),T(e)?v.current=e.detail>1:v.current=!0},onClick:e=>{v.current?v.current=!1:d(e.metaKey||e.altKey),e.currentTarget.focus()},onMouseEnter:p,onMouseLeave:f,onDoubleClick:e=>{T(e)||d(e.metaKey)},onKeyDown:e=>{(r&&(0,t_.yn)(e.code,!0)||!r&&(0,t_.lv)(e.code,!0))&&d(e.metaKey)},onContextMenu:g},n.createElement(tB.Y,null,n.createElement(tk,{indent:o,isLeaf:i,isExpanded:r}),e,h&&n.createElement(tV,{isPinned:!!a,togglePinned:h}),t&&n.createElement(e5,{type:t})))}function tk({indent:e,isLeaf:t,isExpanded:r}){return n.createElement("div",{className:ts()(tF,!t&&"tree_row--clickable--ttIc9"),style:{paddingLeft:14*e,width:14,minHeight:14}},n.createElement("span",null,t?"":r?"\u25BC":"\u25B6"))}function tV({isPinned:e,togglePinned:t}){return n.createElement("span",{onClick:t,className:e?"tree_row--unpinToggle--CU4-x tree_row--_pinToggleBase--W1djM":"tree_row--pinToggle--wbULT tree_row--_pinToggleBase--W1djM"},e?"Unpin":"Pin")}let tM=n.memo(function({diffType:e,id:t,primaryId:r,secondaryId:i,leftBadges:a,indent:s,index:l,isExpanded:o,isLeaf:c,isSelected:u,memoryFraction:h,rightBadges:g,additionalBadges:p,name:f,style:y,select:E,toggle:I,showContextMenu:b}){let S=n.useCallback(e=>{e.preventDefault(),b({objectId:t,position:{left:e.clientX,top:e.clientY}})},[t,b]);return n.createElement(tR,{changeType:e,keyboardNavigationPath:[l],isSelected:u,isLeaf:c,isExpanded:o,indent:s,style:y,select:()=>E(t),toggleExpanded:e=>I(t,e),onContextMenu:S,onMouseEnter:()=>{es.Ez5&&es.Ez5.editorState().figmaScopeHighlightedNode.set(t)},onMouseLeave:()=>{es.Ez5&&es.Ez5.editorState().figmaScopeHighlightedNode.set("")}},n.createElement(eG,{badges:a}),n.createElement(tg,{id:r}),i&&n.createElement(tg,{id:i,secondary:!0}),n.createElement("div",{title:f,className:d.cx.ellipsis.noWrap.overflowHidden.$},f),n.createElement(m.M,null),n.createElement(eG,{badges:g}),p&&n.createElement(eG,{badges:p}),null!=h&&n.createElement("span",{className:d.cx.colorTextSecondary.$,title:"Node memory usage"},(100*h).toFixed(3),"%"))});function t$({style:e,data:{displayedObjects:t,selectedId:r,...i},index:a}){let s=t[a],l=(0,b.zN)(e);return n.createElement(tM,{...s,...i,isSelected:r===s.id,style:l,index:a})}function tU(){let e=(0,l.md)(tG),[t,r]=(0,l.fp)(_),[i,a]=n.useState(null),s=n.useRef(null);n.useEffect(()=>{let r=e.findIndex(e=>e.id===t);r>=0&&s.current?.scrollToItem(r,"smart")},[e,t]);let c=(0,o.Xr)(eI);n.useEffect(()=>{c({type:"expandAncestors",objectId:t})},[c,t]);let u=n.useCallback((e,t)=>{c({type:"toggleExpanded",objectId:e,toggleSubtree:t})},[c]),d=(0,l.md)(eO);return 0===e.length?n.createElement("div",null,d??"Empty Scene"):n.createElement(n.Fragment,null,n.createElement(en.A,{disableWidth:!0},({height:i})=>n.createElement(ei.Y1,{itemSize:18,itemCount:e.length,height:i,ref:s,itemData:{displayedObjects:e,selectedId:t,select:r,toggle:u,showContextMenu:a},width:"100%"},t$)),i&&n.createElement(tA,{contextMenuData:i,onClose:()=>{a(null)}}))}let tG=(0,y.eU)(e=>e(tj)??e(tH)),tj=(0,y.eU)(e=>{let t=e(eA);if(!t)return null;let r=e(E.Cc);return t.map(e=>({...e.displayProperties,diffType:void 0,additionalBadges:r.getAdditionalBadges?.(e.id)??[],id:e.id,indent:0,isExpanded:!1,isLeaf:!0}))}),tH=(0,y.eU)(e=>{let t=e(E.Cc),r=t.rootObjects,n=e(Y),i=e(eI),a=e(eL),s=(()=>{switch(n.type){case G.Tree:return[n.object];case G.Full:return n.resource.rootObjects;default:return[]}})(),l={resource:t,sortFn:a,expandedIds:i};return eo()(r,e=>{if(!e)return[];if(0===s.length)return tY(e,0,l);let t=tW(e,s);return t?tK(e,t,0,l):function e(t,r,n,i){let a=t.id,s=t.children,l=0===s.length,o=!!i.expandedIds[a],c=!1,u=eo()(s,t=>{let a=(()=>{let a=tW(t,r);if(a)return tK(t,a,n+1,i);let s=r.filter(e=>e.someAncestor(e=>e.id===t.id,{includeSelf:!0}));return s.length>0?e(t,s,n+1,i):tY(t,n+1,i)})();return c=c||a[0]?.diffType!=null,a}),d={...t.displayProperties,diffType:c?"CHILD_MODIFIED":void 0,additionalBadges:i.resource.getAdditionalBadges?.(a)??[],id:a,indent:n,isExpanded:o,isLeaf:l};return o?[d,...u]:[d]}(e,s,0,l)})});function tY(e,t,r){let n=e.id,i=e.children,a=0===i.length,s=!!r.expandedIds[n],l={...e.displayProperties,diffType:void 0,additionalBadges:r.resource.getAdditionalBadges?.(n)??[],id:n,indent:t,isExpanded:s,isLeaf:a};return s?[l,...eo()(tz(i,r.sortFn),e=>tY(e,t+1,r))]:[l]}function tK(e,t,r,n){let i=e??t;if(!i)throw Error("Diffing two nothings");if(e&&t&&e.id!==t.id)throw Error("Diffing nodes with mismatched keys");let a=i.id,s=tz(e?.children??[],n.sortFn),l=tz(t?.children??[],n.sortFn),o=(0,ea.TR)(s,l,e=>e.id),c=!1,u=eo()(o,({left:e,right:t})=>{let i=tK(e,t,r+1,n);return c=c||i[0]?.diffType!=null,i}),d=function(e,t,r=!1){if(!e)return"REMOVED";if(!t)return"CREATED";let n=e.rawProperties,i=t.rawProperties;if(n.length!==i.length)return"MODIFIED";for(let e=0;e<n.length;e++)if(void 0!==function e(t,r){let n=W(t,r);if(void 0!==n)return n;let i=t.children,a=r.children;if(i.length!==a.length)return"CHILD_MODIFIED";for(let t=0;t<i.length;t++)if(void 0!==e(i[t],a[t]))return"CHILD_MODIFIED"}(n[e],i[e]))return"MODIFIED";return r?"CHILD_MODIFIED":void 0}(e,t,c),h=e?.displayProperties.name,m=t?.displayProperties.name,g=null!=h&&null!=m&&h!==m?`${h} <=> ${m}`:i.displayProperties.name,p=!!n.expandedIds[a],f={...i.displayProperties,diffType:d,additionalBadges:n.resource.getAdditionalBadges?.(a)??[],id:a,indent:r,isExpanded:p,isLeaf:0===o.length,name:g};return p?[f,...u]:[f]}function tW(e,t){return t.find(t=>t.id===e.id)}function tz(e,t){return e.slice().sort(t)}var tX=r(875917);function tJ({searchRef:e}){let t=(0,o.Xr)(_),r=(0,l.md)(ex),i=(0,l.md)(eP),[a,s]=n.useState(!1),c=(0,l.md)(eN)!==P.Filter&&a,u=n.useRef(null);(0,tv.ww)(u,()=>s(!1));let h=n.useCallback(e=>{s(!1),t(e.object.id)},[s,t]);return n.createElement(t_.dP,{className:d.cx.flex1.$,ref:u,allowVim:!0},n.createElement(tq,{searchRef:e,setShowSearchResults:s}),c&&(r?n.createElement(tZ,{searchResults:r,selectResult:h}):i?n.createElement(t0,{text:i}):null))}function tq({searchRef:e,setShowSearchResults:t}){let r=(0,l.md)(eN),i=function(){let e=(0,l.md)(E.Cc),t=(0,o.Xr)(ev),r=(0,o.Xr)(eC),i=(0,o.Xr)(eT),a=n.useRef(0),s=n.useMemo(()=>(0,eS.s)(n=>{let s=++a.current;i(!0);let l=new TaskController({priority:"user-visible"});scheduler.postTask(()=>i(!0),{signal:l.signal,delay:300}).catch(()=>{}),e.getSearch(r).then(e=>e.searchWithText(n)).then(e=>{l.abort(),s===a.current&&t({status:"success",results:e})}).catch(e=>{console.error(e),l.abort(),s===a.current&&t({status:"error",error:e})})},200),[e,r,t,i]);return n.useCallback(e=>0===e.length?t({status:"initial"}):s(e),[s,t])}(),{setKeyboardNavigationElement:a}=(0,t_.M3)({path:[0,0],id:"input"});return n.createElement("input",{ref:t=>{a(t),e.current=t},type:"text",placeholder:r,className:"search_bar--searchBar--qnpUm",onChange:e=>i(e.target.value),onFocus:()=>t(!0)})}function tQ({children:e}){return n.createElement("div",{className:d.cx.absolute.zIndexModal.colorBg.b1.colorBorder.mt2.overflowAuto.$,style:{maxHeight:450,minWidth:500,boxShadow:"0px 2px 14px var(--color-shadow, rgba(0, 0, 0, 0.15))"}},e)}function tZ({searchResults:e,selectResult:t}){return n.createElement(tQ,null,e.map((e,r)=>n.createElement(t1,{key:e.object.id,result:e,index:r,onClick:()=>t(e)})))}function t0({text:e}){return n.createElement(tQ,null,(Array.isArray(e)?e:[e]).map((e,t)=>n.createElement("div",{key:t,className:d.cx.colorBg.colorTextSecondary.px8.py4.$},e)))}function t1({result:e,index:t,onClick:r}){let{object:i,matches:a}=e,{displayProperties:s}=i,{setKeyboardNavigationElement:l,keyboardNavigationItem:o,isFauxFocused:c}=(0,t_.M3)({path:[1,t],id:i.id});return n.useEffect(()=>{o&&0===t&&o.fauxFocus()},[o,t]),n.createElement("button",{ref:l,className:ts()(d.cx.block.wFull.px4.py8.colorText.flex.itemsCenter.alignLeft.$,"search_bar--searchResult--0iOvc",c&&"search_bar--fauxFocus--BYHwu"),onClick:r},n.createElement(m.Y,{spacing:4},n.createElement(eG,{badges:s.leftBadges}),n.createElement(tg,{id:i.displayProperties.primaryId}),n.createElement(tX.R,{className:d.cx.overflowHidden.$,text:s.name}),n.createElement(m.M,null),a.filter(({property:e})=>!["id","guid","name","type","phase"].includes(e)).map(({property:e,value:t},r)=>n.createElement(m.Y,{key:r,spacing:4,width:"hug-contents"},n.createElement("div",null,e,":"),n.createElement("div",null,t)))))}var t6=r(163023);function t5({children:e}){return n.createElement("div",{className:d.cx.colorBorder.px8.py4.bb1.bSolid.$},n.createElement(m.Y,null,e))}function t4(e){let t={className:"toolbar_components--iconButton--1-XNe",children:n.createElement(t6.B,{svg:e.svg}),title:e.label,"aria-label":e.label};return"href"in e?n.createElement("a",{...t,href:e.href,target:"blank"}):n.createElement("button",{...t,onClick:e.onClick,disabled:e.disabled})}var t7=r(444890),t3=r(816679),t2=r(167198),t8=r(247866);function t9({searchRef:e}){let t=(0,l.md)(Z),[r,i]=(0,l.fp)(B),[s,o]=(0,l.fp)(L),c=!!n.useContext(M).selectInApp,[u,d]=(0,l.fp)(eN),[h,m]=(0,l.fp)(R),[g,p]=(0,l.fp)(e_),f=(0,l.md)(eB);return n.createElement(t5,null,n.createElement(tJ,{searchRef:e}),n.createElement("select",{name:"filter-or-search",title:"Determines whether the text box searches or filters",onChange:e=>{d(e.target.value)},defaultValue:u},n.createElement("option",{value:P.Search},"Search"),n.createElement("option",{value:P.Filter},"Filter")),n.createElement("select",{name:"sort",title:"Sets the left panel sort order",onChange:e=>{let t=e.target.value;a.az.trackDefinedEvent("figmascope.sort_order_change",{order:function(e){switch(e){case x.Position:return"position";case x.Name:return"name";case x.Memory:return"memory";case x.NodeId:return"node_id"}}(t)}),p(t)},defaultValue:g},f.map(e=>n.createElement("option",{key:e,value:e},"Sort by ",e))),c&&n.createElement(n.Fragment,null,n.createElement("input",{name:"follow-selection",type:"checkbox",checked:h,onChange:e=>m(e.target.checked)}),n.createElement("label",{htmlFor:"follow-selection"},"Follow")),n.createElement(t4,{label:"Select Previous",onClick:()=>{i(),a.az.trackDefinedEvent("figmascope.select_prev_next",{direction:"prev",source:"button"})},disabled:!r,svg:t7.A}),n.createElement(t4,{label:"Select Next",onClick:()=>{o(),a.az.trackDefinedEvent("figmascope.select_prev_next",{direction:"next",source:"button"})},disabled:!s,svg:t3.A}),t&&n.createElement(re,null))}function re(){let[e,t]=(0,l.fp)(ee),r=e.status===u.r.LOADING;return n.useEffect(()=>{t()},[t]),n.createElement(t4,{label:r?"Fetching scene graph validation failures":"Refetch scenegraph validation failures",onClick:t,svg:r?t2.A:t8.A})}var rt=r(91408),rr=r(837746);let rn=(0,rt.jz)(rr.HJx),ri=(0,rt.jz)(rr.EJM),ra=new WeakMap;function rs(e){let t=ra.get(e);if(void 0!==t)return t;let[r,n]=es.Vzr.generateThumbnailForNode(T.c1.fromKiwi(e),4*ri,4*rn,4,{forceContentsOnly:!0,isDetatchedComponentScene:!1});if(!n||0===n.length||!r)return ra.set(e,null),null;let{width:i,height:a}=r,s={url:URL.createObjectURL(new Blob([n])),renderWidth:i/4,renderHeight:a/4};return ra.set(e,s),s}var rl=r(140593),ro=r(364898),rc=r(428654),ru=r(2685),rd=r(40963),rh=r(275725),rm=r(620722);let rg=(0,rt.jz)(rr.HJx),rp=(0,rt.jz)(rr.EJM);function rf({thumbnailInput:e}){let t=rs(e),r=(0,rh.c6)(T.c1.fromKiwi(e));return t?n.createElement("div",{className:d.cx.wFull.flex.flexShrink1.itemsCenter.justifyCenter.$,style:r},n.createElement(rm.J,{className:"node_thumbnail_display--thumbnailPreview--9qgOD",src:t.url,width:t.renderWidth>rp?rp:t.renderWidth,height:t.renderHeight>rg?rg:t.renderHeight})):n.createElement("span",{className:d.cx.noWrap.colorTextDesign.$},"Error generating thumbnail")}function ry({value:e}){switch(e.type){case"blobIndex":return n.createElement(rB,{...e});case"userInputtedText":return n.createElement(rT,{...e});case"nonUserText":return n.createElement(rD,{...e});case"boolean":return n.createElement(rC,{...e});case"numeric":return n.createElement(rP,{...e});case"position":return n.createElement(rN,{...e});case"color":return n.createElement(rx,{...e});case"vector":return n.createElement(rA,{...e});case"matrix":return n.createElement(rO,{...e});case"objectId":return n.createElement(tc,{id:e.value});case"nodeGuid":return n.createElement(tu,{guid:e.value,scene:e.scene});case"styleId":return n.createElement(td,{styleId:e.value,scene:e.scene});case"variableId":return n.createElement(th,{variableId:e.value,scene:e.scene});case"variableCollectionId":return n.createElement(tm,{variableCollectionId:e.value,scene:e.scene});case"genericGuid":return n.createElement(tp,{guid:e.value});case"guidPath":return n.createElement(tf,{guidPath:e.value});case"imageHash":return n.createElement(rL,{...e});case"bytes":return n.createElement(r_,{...e});case"metadata":return n.createElement(rR,{...e});case"error":return n.createElement(rk,{...e});case"nodeThumbnail":return n.createElement(rf,{thumbnailInput:e.value});case"editScope":return n.createElement(rF,{...e});case"timestamp":return n.createElement(rR,{value:new Date(e.value).toLocaleString()});default:(0,rl.xb)(e)}}let rE=d.cx.noWrap,rI=rE.colorTextDesign,rb=rE.colorTextSuccess,rS=rE.colorTextDanger,rv=rE.colorTextSecondary;function rC({value:e}){return n.createElement("span",{className:rb.$},e?"TRUE":"FALSE")}function rT({value:e}){let t=(0,l.md)(E.Cc),r=(0,rd.bU)(e,t.sensitiveTextPolicy);return n.createElement("span",{className:rI.$},'"',r,'"')}function rD({value:e}){return n.createElement("span",{className:rI.$},e)}function rN({value:e}){return n.createElement(m.Y,{width:"hug-contents"},n.createElement("span",{className:rI.$},(0,ro.PZ)(e)),n.createElement("span",{className:rv.$},"(compressed: `",e,"`)"))}function rx({value:e}){let t=rc.F.format(e);return n.createElement(m.Y,{width:"hug-contents"},n.createElement("span",{className:d.cx.inlineBlock.w12.h12.bRadius2.$,style:{backgroundColor:t}}),n.createElement("span",{className:rI.$},t))}function rP({value:e}){return n.createElement("span",{className:rb.$},rV(e))}function rA({value:e}){return n.createElement("span",{className:rb.$},`<${rV(e.x||0)}, ${rV(e.y||0)}>`)}function rO({value:e}){let{m00:t,m01:r,m02:i,m10:a,m11:s,m12:l}=e;return n.createElement("span",{className:rb.$},"[",[[t,r,i],[a,s,l]].map(e=>`[${e.map(rV).join(", ")}]`).join(", "),"]")}function r_({value:e}){return n.createElement("span",{className:rb.$},rM(e))}function rB({value:e,scene:t}){let r=t.getBlobByIndex(e);return r===ru.y?n.createElement(rR,{value:`Blob ${e} :: [NOT SUPPORTED]`}):r?n.createElement("span",{className:rb.$},"Blob ",e," ::"," ","string"==typeof r?r:rM(r.bytes)):n.createElement(rk,{value:`Blob ${e} :: [MISSING]`})}function rL({value:e}){let t=r$(e,"");return n.createElement(n.Fragment,null,n.createElement("span",{className:rb.$},t),n.createElement("span",null,n.createElement(rw,{hash:t,name:"staging"})," | ",n.createElement(rw,{hash:t,name:"prod"})))}function rw({hash:e,name:t}){return n.createElement("a",{href:`https://${"staging"===t?"staging-":""}admin.figma.com/admin/image/${e}`},t)}function rF({value:e}){return n.createElement(m.Y,{width:"hug-contents"},n.createElement("span",{className:rb.$},e.type),n.createElement("span",{className:rI.$},e.label),e.editorType&&n.createElement("span",{title:"The editor type active when this scope was opened",className:rv.$},"(",e.editorType.toLowerCase(),")"))}function rR({value:e}){return n.createElement("span",{className:rv.$},"(",e,")")}function rk({value:e}){return n.createElement("span",{className:rS.$},e)}function rV(e){return"bigint"==typeof e||e%1==0?e.toString():e.toFixed(4)}function rM(e){return`binary[${e.length}] = ${r$(e," ")}`}function r$(e,t){let r="";for(let n=0;n<e.length;++n){if(n>=30){r+="...";break}r+=function(e){let t=e.toString(16);return 1===t.length?"0"+t:t}(e[n])+t}return r}let rU=(0,rt.jz)(rr.hVg),rG=(0,rt.jz)(rr.k$X),rj=n.memo(function({panel:e,items:t,diffItems:r,extraItems:i}){let[a,s]=(0,l.fp)("middle"===e?eg:ef),[o,c]=(0,l.fp)("middle"===e?ep:ey),u=n.useMemo(()=>{let e=[];for(let t of i??[])e=e.concat(rq(t,0,void 0,a,o));let n=rX(t??[],void 0,o),s=null!=r,l=rX(r??[],void 0,o);for(let t of(0,ea.TR)(n,l,e=>rW(e,void 0)))e=s?e.concat(rQ(t.left,t.right,0,void 0,a,o)):e.concat(rq(t.left??t.right,0,void 0,a,o));return e},[t,r,i,a,o]),d=n.createRef();function h(e){if(void 0!==u[e]){let t=u[e].value;if(t&&"nodeThumbnail"===t.type){let e=rs(t.value);if(e)return e.renderHeight+rG}}return rU}return n.useEffect(()=>{d.current?.resetAfterIndex(0)},[d,u]),n.createElement(en.A,{disableWidth:!0},({height:t})=>n.createElement(ei._m,{ref:d,itemSize:h,itemCount:u.length,height:t,itemKey:e=>u[e].expansionKey,itemData:{panel:e,displayedProperties:u,togglePropertyExpanded:s,togglePropertyPinned:c},width:"100%"},rH))});function rH({style:e,index:t,data:{panel:r,displayedProperties:i,togglePropertyExpanded:a,togglePropertyPinned:s}}){let l=i[t],o=(0,tO.ZC)(l),[c,u]=n.useState(!1),d=n.useRef(void 0);n.useEffect(()=>{o&&null!=W(o,l)&&(clearTimeout(d.current),u(!0),d.current=setTimeout(()=>u(!1),250))},[l,o]),n.useEffect(()=>()=>clearTimeout(d.current),[]);let h=(0,b.zN)(e);return n.createElement(rK,{...l,style:h,isChanging:c,panel:r,index:t,togglePropertyExpanded:a,togglePropertyPinned:s})}let rY=n.memo(function({diffValue:e,value:t}){return n.createElement(m.Y,{width:"hug-contents"},null!=e&&n.createElement(ry,{value:e}),null!=e&&n.createElement("span",null,"\u21E8"),null!=t&&n.createElement(ry,{value:t}))}),rK=n.memo(function({childExpansionKeys:e,expansionKey:t,indent:r,isExpanded:i,isChanging:s,isPinned:l,isLeaf:o,isImage:c,label:u,index:h,style:g,value:p,diffValue:f,diffType:y,panel:E,togglePropertyExpanded:I,togglePropertyPinned:b}){return n.createElement(tR,{keyboardNavigationPath:[h],isLeaf:o,isExpanded:i,isChanging:s,indent:c?0:r,style:c?{...g,height:"fit-content",width:"100%",alignItems:"flex-start"}:g,toggleExpanded:r=>{i||a.az.trackDefinedEvent("figmascope.expand_row",{field:u,panel:E}),I(t,r?e:[])},isPinned:l,togglePinned:c?void 0:()=>{l||a.az.trackDefinedEvent("figmascope.pin_row",{field:u,panel:E}),b(t)},changeType:y},c?n.createElement(rY,{diffValue:f,value:p}):n.createElement(n.Fragment,null,n.createElement("span",{className:d.cx.colorText.$},u),n.createElement("div",{className:d.cx.ellipsis.noWrap.overflowHidden.alignCenter.$},n.createElement(rY,{diffValue:f,value:p}))),n.createElement(m.M,null))}),rW=(e,t)=>{let r=e.key??e.label;return t?[t,r].join("."):r},rz=(e,t)=>!!t[e],rX=(e,t,r)=>[...e.filter(e=>rz(rW(e,t),r)),...e.filter(e=>!rz(rW(e,t),r))],rJ=(e,t,r,n)=>{if(e)return!1;let i=n[t];return null!=i?i:r??!1},rq=(e,t,r,n,i)=>{let a=rW(e,r),s=0===e.children.length,l=e.value?.type==="nodeThumbnail",o=rJ(s,a,e.expandByDefault,n),c=eo()(rX(e.children??[],a,i),e=>rq(e,t+1,a,n,i)),u={label:e.label,value:e.value,isExpanded:o,isLeaf:s,isImage:l,indent:t,expansionKey:a,childExpansionKeys:eo()(c,e=>[e.expansionKey,...e.childExpansionKeys]),isPinned:rz(a,i)};return o?[u,...c]:[u]},rQ=(e,t,r,n,i,a)=>{let s=e??t;if(!s)throw Error("Nothing to diff");if(e&&t&&rW(e,n)!==rW(t,n))throw Error("Mismatched keys");let l=rW(s,n),o=rX(e?.children??[],l,a),c=rX(t?.children??[],l,a),u=(0,ea.TR)(o,c,e=>rW(e,l)),d=!1,h=eo()(u,({left:e,right:t})=>{let n=rQ(e,t,r+1,l,i,a);return d=d||null!=n[0].diffType,n}),m=0===u.length,g=W(e,t,d),p=rJ(m,l,s.expandByDefault??!1,i),f=s.value?.type==="nodeThumbnail",y={label:s.label,value:s.value,diffValue:e&&t&&g?t?.value:void 0,isExpanded:p,isLeaf:m,isImage:f,indent:r,expansionKey:l,childExpansionKeys:eo()(h,e=>[e.expansionKey,...e.childExpansionKeys]),isPinned:rz(l,a),diffType:g};return p?[y,...h]:[y]};var rZ=r(946689),r0=r(506563),r1=r(91365),r6=r(630834);function r5({selectedObject:e,diffObject:t,onClose:r}){let[i,a]=(0,l.fp)(H);return n.createElement(t5,null,e?i&&t?n.createElement(r3,{selectedObject:e,diffObject:t,diffState:i,setDiffState:a}):n.createElement(r7,{object:e}):t?n.createElement(r7,{object:t}):n.createElement(m.M,null),n.createElement(t4,{label:"Help",href:r0.e,svg:r1.A}),r&&n.createElement(t4,{label:"Close FigmaScope",onClick:r,svg:r6.default}))}let r4=d.cx.flex1.ml10.my4.$;function r7({object:e}){return n.createElement("div",{className:r4},n.createElement("span",{className:d.cx.fontSemiBold.$},e.displayProperties.longName))}function r3({selectedObject:e,diffObject:t,diffState:r,setDiffState:i}){let a=(0,o.Xr)(_);return n.createElement("div",{className:d.cx.flex1.ml10.my4.$},n.createElement("div",null,n.createElement("span",{className:d.cx.colorTextSecondary.$},"Diffing "),n.createElement("span",{className:d.cx.fontSemiBold.$},e.displayProperties.longName),n.createElement("span",{className:d.cx.colorTextSecondary.$}," against "),n.createElement("span",{className:d.cx.fontSemiBold.$},t.displayProperties.longName)),r&&n.createElement("div",{className:d.cx.colorTextSecondary.mt8.$},n.createElement(m.Y,{spacing:8,width:"hug-contents",height:"hug-contents",verticalAlignItems:"start"},n.createElement("span",null,"Snapshot of"," ",n.createElement(rZ.CY,{onClick:()=>a(r.object.id),className:d.cx.colorTextFigjam.fontSemiBold.$,trusted:!0},r.object.displayProperties.name),r.type===G.Tree&&" and full subtree"," was taken at"," ",r.time.toLocaleTimeString("en-US")),n.createElement(rZ.CY,{onClick:()=>i({type:"refresh"}),className:d.cx.colorTextDesign.$,trusted:!0},"Refresh"),n.createElement(rZ.CY,{onClick:()=>i({type:"clear"}),className:d.cx.colorTextDanger.$,trusted:!0},"Finish"))))}let r2=n.memo(function({embedded:e=!1,emptyStateContent:t,onClose:r,appSelection:i,setAppSelection:a}){let s=(0,l.md)(E.lu);switch(s.status){case u.r.INIT:return t??n.createElement(er.zG,null);case u.r.LOADING:return n.createElement(er.zG,null);case u.r.FAILURE:return n.createElement(er.rf,{error:s.error});case u.r.SUCCESS:}if(0===s.value.primaryResource.rootObjects.length)return n.createElement(er.rf,{error:"No root objects found. This is likely a bug - please report in #figmascope."});let o=n.createElement(r9,{appSelection:i,setAppSelection:a,onClose:r});return e?o:n.createElement(r8,null,o)});function r8({children:e}){let{name:t,metadata:r}=(0,l.md)(E.Cc);return n.createElement("div",{className:d.cx.hFull.$},n.createElement(m.Y,{direction:"vertical",width:"fill-parent",height:"fill-parent",padding:0,spacing:0},n.createElement(m.Y,{direction:"horizontal",width:"fill-parent",height:32,padding:8,spacing:32,backgroundColor:"toolbar"},t&&n.createElement(g.E,{fontWeight:"bold",color:"toolbar"},t),r&&Object.entries(r).map(([e,t])=>t&&n.createElement("span",{key:e},n.createElement(g.E,{color:"toolbar-secondary"},e,": "),n.createElement(g.E,{color:"toolbar",fontFamily:"monospace",fontWeight:"bold"},t)))),e))}function r9({onClose:e,appSelection:t,setAppSelection:r}){let d=n.useRef(null),m=n.useRef(null),{windowInnerWidth:g}=(0,s.l)(),[p,f]=n.useState("35%"),[y,I]=n.useState("50%"),b=n.useRef(null),[S,v]=(0,i.i)({onDrag(e){let t=b.current?b.current.getBoundingClientRect().right:0,r=(e.clientX-t)/g;f(`${(100*r).toFixed(2)}%`)}}),[C,T]=(0,i.i)({onDrag(e){let t=m.current;if(!t)return;let r=(e.clientX-t.getBoundingClientRect().left)/t.clientWidth;I(`${(100*r).toFixed(2)}%`)}}),D=(0,o.Xr)(B),N=(0,o.Xr)(L),x=n.useCallback(e=>{let t=d.current;document.activeElement!==t&&(e.keyCode===c.Uz.FORWARD_SLASH&&t?(t.focus(),e.preventDefault()):e.keyCode===c.Uz.BRACKET_LEFT?(a.az.trackDefinedEvent("figmascope.select_prev_next",{direction:"prev",source:"keyboard"}),D()):e.keyCode===c.Uz.BRACKET_RIGHT&&(a.az.trackDefinedEvent("figmascope.select_prev_next",{direction:"next",source:"keyboard"}),N()))},[D,N]),P=(0,l.md)(E.Cc);window.figmaScope=P,window.figmaScopeScene=P,function(e){let[t,r]=(0,l.fp)(ee);t.status===u.r.SUCCESS&&e?.setSceneGraphValidationInfo?.(t.value),(0,n.useEffect)(()=>{r()},[r])}(P);let A=(0,l.md)(_),O=(0,l.md)(F),w=(0,l.md)(K);return n.createElement(k,{appSelection:t,setAppSelection:r},n.createElement("div",{className:"main_view--root--uFXxy",style:h.sx.if(S||C,{cursor:"ew-resize"}).$,onKeyDown:x},n.createElement("div",{className:"main_view--left--HQbxu",style:{width:p}},n.createElement(t9,{searchRef:d}),n.createElement(tw,{className:"main_view--layersPanel---l3kd"},n.createElement("div",{...v({style:{position:"absolute",top:0,bottom:0,right:"-3px",width:"5px",gridArea:"center",cursor:"ew-resize",zIndex:9}})}),n.createElement(tU,null))),n.createElement("div",{className:"main_view--right--X5cs-"},n.createElement(r5,{selectedObject:O,diffObject:w,onClose:e}),(O||w)&&n.createElement("div",{className:"main_view--rightContents--to1Gi",ref:m},n.createElement(tw,{className:"main_view--nodeFieldsPanel--4n2yP",style:{width:y}},n.createElement("div",{...T({style:{position:"absolute",top:0,bottom:0,right:"-3px",width:"5px",gridArea:"center",cursor:"ew-resize",zIndex:9}})}),n.createElement(rj,{panel:"middle",items:O?.rawProperties,diffItems:w?.rawProperties,extraItems:void 0,key:A})),n.createElement(tw,{className:"main_view--computedPropertiesPanel--Dub7j"},n.createElement(rj,{panel:"right",items:O?.computedProperties,diffItems:w?.computedProperties,extraItems:P.getAdditionalProperties?.(A),key:A}))))))}}}]);

//# debugId=04604b86-0a42-5a3c-812f-840384fc123a

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/2475067b71553021b3ec8b2f9ae0f8b7db354b15/2674-6652d2dd7635b3b0.min.js.map