"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="5a0ade71-3d6b-5297-9f43-40aa288396e6")}catch(e){}}();
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[3995],{363668:(e,t,n)=>{n.d(t,{J:()=>p});var i=n(411855),a=n(922827),l=n(340818),r=n(776250),o=n(374626),c=n(809831),u=n(326069),s=n(457630),d=n(252296),f=n(230413),m=n(883211);let h=n(699670).zS;function p(){let[e,t]=(0,o.fp)(m.ph),n=(0,o.md)(m.KG),p=(0,o.md)(m.kh),E=(0,s._X)({subscribeToUpdates_expensive:!0}),[g,b]=(0,i.useState)(null),S="whiteboard"===(0,c.lg)(),v=i.useCallback(()=>{if(e){let{emojis:t,index:n}=e;if(t&&n>=0&&n<t.length){let e=(0,u._Q)(t[n]);e&&l.l7.user("insert-emoji",()=>{(0,r.sx)("inserted_editor_emoji",{emoji:e}),a.SmY.replaceCurrentShortcodeWithEmoji(e)})}}},[e]),y=i.useCallback(()=>{t(null)},[t]);if(!p||!e||null===n)return null;let T=(0,s.Yb)(E,p);if(!(0,s.ZT)(T,E))return null;let C={top:T.y+E.y-8,bottom:T.y+E.y+T.height+8,left:T.x+E.x,right:T.x+E.x+T.width,height:T.height,width:T.width},O=g&&C.height>0&&C.bottom>E.height-g&&C.top>E.height-C.bottom?{positionFromBottom:{left:C.left,bottom:E.height+E.y-C.top},direction:f.ri.UPWARDS}:{targetRect:C,direction:f.ri.DOWNWARDS};return i.createElement("div",null,i.createElement(d.j,{dispatchTypeahead:t,typeahead:e,onInsert:v,onClear:y,width:168,...O,setMaxTypeaheadHeight:b,zIndex:h,isFigJam:S,recordingKey:"emojiTypeaheadView",emojiImageSet:n}))}},593986:(e,t,n)=>{n.d(t,{C_:()=>E,E0:()=>d,iv:()=>h,LP:()=>p,JI:()=>m,v2:()=>f});var i=n(411855),a=n(188507),l=n(140593),r=n(922827),o=n(91408),c=n(563706),u=n(809831),s=n(837746);let d=(0,o.hG)(s.tui);function f(){let e=(0,a.d4)(({mirror:{selectionProperties:e,sceneGraphSelection:t,appModel:n}})=>1===Object.keys(t).length&&e.whiteboardNumSelectedByType&&1===e.whiteboardNumSelectedByType.SECTION&&(e.name||n.onCanvasNameEditorInfo.mode===r.nzw.SECTION_NAME)),t=(0,a.d4)(({mirror:{selectionProperties:e,sceneGraphSelection:t}})=>1===Object.keys(t).length&&e.whiteboardNumSelectedByType&&1===e.whiteboardNumSelectedByType.STAMP),n=(0,a.d4)(({mirror:{selectionProperties:e}})=>e.nodeSelectedValidForQuickAdd);return"whiteboard"===(0,u.lg)()?e?40:t&&c.XN?40:n?20+d/2:r.qmM?.shouldRenderTableUiForSelection()!==r.miS.HIDE?20+d/2:16:8}function m(){return(0,a.d4)(e=>e.mirror.appModel.hyperlinkLocation)}function h(e,t,n,i){switch(i){case r.cfv.ABOVE:return n<e.y?r.cfv.ABOVE:r.cfv.BELOW;case r.cfv.BELOW:return n>e.y?r.cfv.BELOW:r.cfv.ABOVE;case r.cfv.LEFT:return t<e.x?r.cfv.LEFT:r.cfv.RIGHT;case r.cfv.RIGHT:return t>e.x?r.cfv.RIGHT:r.cfv.LEFT;default:(0,l.xb)(i)}}function p(e){let t=i.useRef({frameHandle:null,didMenuMidpointChange:!1,didSelectionChange:!1,lastMidpoint:{x:0,y:0},lastSelection:{}}),n=i.useCallback(()=>{let{current:n}=t;n.didMenuMidpointChange&&n.didSelectionChange&&e.current?.animate(),n.frameHandle||(n.frameHandle=setTimeout(()=>{n.didMenuMidpointChange=!1,n.didSelectionChange=!1,n.frameHandle=null},0))},[e]);return{markSelectionChanged:i.useCallback(e=>{Object.keys(t.current.lastSelection).length&&(t.current.didSelectionChange=!0,n()),t.current.lastSelection=e},[n]),markPositionChanged:i.useCallback(e=>{let{current:i}=t;(e.x!==i.lastMidpoint.x||e.y!==i.lastMidpoint.y)&&(i.didMenuMidpointChange=!0,n()),i.lastMidpoint=e},[n])}}let E=i.forwardRef(function({children:e},t){let n=i.useRef(null);return i.useImperativeHandle(t,()=>({animate:()=>{n.current&&(n.current.style.animation="none",n.current.offsetTop,n.current.style.animation="")}})),i.createElement("div",{ref:n,className:"inline_editor_layer--animationRoot--pX-db"},e)})},648836:(e,t,n)=>{n.d(t,{k:()=>g});var i=n(411855),a=n(188507),l=n(140593),r=n(922827),o=n(581166),c=n(374626),u=n(835036),s=n(809831),d=n(555074),f=n(457630),m=n(100197),h=n(425187),p=n(662599),E=n(593986);function g({children:e,isShown:t,centerInFrame:n,anchorToRect:l,showInReadOnly:o}){let c;let[u,s]=i.useState(!1),[h,p]=i.useState(!1),g=i.useRef(null),{markPositionChanged:S,markSelectionChanged:v}=(0,E.LP)(g),y=(0,a.d4)(({mirror:{appModel:e}})=>[r.QOV.DEFAULT,r.QOV.SELECTING_TEXT,r.QOV.CLICKING_TO_CHANGE_SELECTION].includes(e.activeUserAction)),T=(0,a.d4)(({mirror:{appModel:e}})=>e.isReadOnly),C=(0,f._X)({subscribeToUpdates_expensive:t}),O=(0,m.J2)(r.Ez5.canvasViewState().selectionBoundingRect),k=(0,m.J2)(r.Ez5.canvasViewState().inlineMenuTarget),I=l||k?.boundingBox||O,x=(0,E.JI)(),M=(0,a.d4)(e=>e.mirror.sceneGraphSelection),w=(0,d.kl)("isTableSublayerSelected"),B=(c=r.cfv.ABOVE,k?.preferredPosition?c=k.preferredPosition:w&&(c=r.cfv.BELOW),c),L=!!x||!C||!I||!y||T&&!o||!t;i.useEffect(()=>{(L||h)&&u&&s(!1)},[L,u,h]);let A=C?.offsetX||0,R=C?.offsetY||0;return(i.useEffect(()=>{s(!1)},[M,A,R]),i.useEffect(()=>{v(M)},[M,v]),L)?i.createElement(E.C_,{ref:g},null):i.createElement(b,{viewport:C,animationContainerRef:g,centerInFrame:n,boundingBox:I,preferredRelativePosition:B,setSizeChanged:p,isHovering:u,setIsHovering:s,markPositionChanged:S},e)}function b({children:e,viewport:t,animationContainerRef:n,centerInFrame:a,boundingBox:d,preferredRelativePosition:m,setSizeChanged:g,isHovering:b,setIsHovering:S,markPositionChanged:v}){let[y,T]=(0,c.fp)(h.f),C=y.positionRelativeToSelection,O=i.useRef(null),k=(0,s.lg)(),I=(0,E.v2)(),x=a?0:I,M=(0,u.FQ)(),w=(0,f.Yb)(t,d),B=i.useMemo(()=>({...w,x:w.x+t.x,y:w.y+t.y}),[w,t]),L=i.useCallback((e,n,i,a)=>{if(t){let l=e-t.x,o=n-t.y,c=(0,f.$$)(t,{x:l,y:o-a/window.devicePixelRatio});r.glU.figjamInlineMenuPositionUpdate(c.x,c.y,i.height)}v({x:e+i.width/2,y:n+i.height/2});let l=(0,E.iv)(B,e,n,m);C!==l&&T({type:"SET_POS_RELATIVE_TO_SELECTION",payload:l})},[t,v,B,C,T,m]),A=i.useCallback((e,t,n)=>{switch(n){case r.cfv.ABOVE:return[(0,p.Al)(e,t),a?(0,p.tJ)(e,t):(0,p.T1)(e,t,x)];case r.cfv.BELOW:return[(0,p.Al)(e,t),a?(0,p.tJ)(e,t):(0,p.DH)(e,t,x)];case r.cfv.LEFT:return[(0,p.Dl)(e,t,20),a?(0,p.tJ)(e,t):e.y];case r.cfv.RIGHT:return[(0,p.Yh)(e,20),a?(0,p.tJ)(e,t):e.y];default:(0,l.xb)(n)}},[x,a]),R=i.useCallback((e,t,n)=>{let[i,a]=A(e,t,n);return o.r.fromOriginAndSize(i,a,t.width,t.height)},[A]),_=i.useCallback((e,t,n,i,l)=>!a&&n===r.cfv.ABOVE&&i.top()>l.top()?R(e,t,r.cfv.BELOW):!a&&n===r.cfv.BELOW&&i.top()<l.top()?R(e,t,r.cfv.ABOVE):n===r.cfv.LEFT&&i.left()>l.left()?R(e,t,r.cfv.RIGHT):n===r.cfv.RIGHT&&i.left()<l.left()?R(e,t,r.cfv.LEFT):i,[R,a]),N=i.useCallback((e,n,i,a)=>{let l=o.r.fromOriginAndSize(t.x,t.y,t.width,t.height),r=R(e,n,m),c=M(r,l,a),u=_(e,n,m,c,r);return u!==c&&(c=M(u,l,a)),[c.left(),c.top()]},[m,t.height,t.width,t.x,t.y,M,R,_]);if(!(0,f.ZT)(w,t))return i.createElement(E.C_,{ref:n},null);let P="whiteboard"===k&&b?{transition:"transform 0.1s"}:{};return P.WebkitUserSelect="none",i.createElement(p.lM,{style:P,targetRect:B,onMouseEnter:()=>{S(!0),O.current&&clearTimeout(O.current),O.current=null},onMouseLeave:()=>{O.current=setTimeout(()=>S(!1),100)},offset:x,positionXY:N,onPosition:L,frozen:b,setSizeChanged:g},i.createElement(E.C_,{ref:n},e))}},359919:(e,t,n)=>{n.d(t,{n:()=>c});var i=n(411855),a=n(188507),l=n(601607),r=n(980150),o=n(982386);function c(){let e=function(){let e=(0,a.d4)(e=>e.mirror.appModel.onCanvasPillInfo);return(0,l.Fk)((e,t)=>t&&0!==t.length?t.map(t=>{let n=e.get(t.guid);if(!n||"-1:-1"===n.guid)return null;let i={guid:n.guid,name:n.name,type:n.type,boundingBox:n.absoluteBoundingBox,isFigmaPurple:t.isFigmaPurple,hasEnabledStaticImagePaint:n.hasEnabledStaticImagePaint,isState:n.isState,isStateGroup:n.isStateGroup,stackCounterAlignItems:n.stackCounterAlignItems,stackMode:n.stackMode,isGroup:n.isGroup,canHaveStatus:n.canHaveStatus,hasStatus:n.hasStatus,objectsPanelThumbnailId:n.objectsPanelThumbnailId};if(i.isState&&t.symbolId){let n=e.get(t.symbolId);i.symbolName=n?.name}return i}):null,e)}()?.[0];return e?i.createElement(r.MO,{node:e,offsetX:-3},i.createElement("div",{className:o.nM},i.createElement(r.Tq,{node:e}),i.createElement("span",{className:o.dK},e.symbolName?e.symbolName:e.name))):null}}}]);

//# debugId=5a0ade71-3d6b-5297-9f43-40aa288396e6

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/c4f3dd06d3caeda5b1a6c5db68b3632a2683ca54/3995-9a75fdb8204c7d19.min.js.map