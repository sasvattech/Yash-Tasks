"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="8ea1e4bf-33b6-5562-930b-3bf5d77d5135")}catch(e){}}();
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[9634],{901765:(e,t,n)=>{n.d(t,{L:()=>o});var a=n(411855);function o(e,t,n){a.useEffect(()=>{let a=a=>{let o=a.target;n&&!o.isConnected||e.current?.contains(o)||t()};return document.addEventListener("click",a),()=>{document.removeEventListener("click",a)}})}},160156:(e,t,n)=>{n.d(t,{K1:()=>N,Zo:()=>$,xT:()=>R});var a=n(411855),o=n(140593),i=n(629019),l=n.n(i),r=n(729074),s=n(568214),d=n(988652),c=n(768137),u=n(135876),m=n(163023),g=n(939863),p=n(553015),v=n(28588),f=n(103271),E=n(498606),h=n(126674),b=n(406158),I=n(987669),P=n(421689),C=n(441883),w=n(36019),T=n(151146),k=n(501191),_=n(169852),x=n(95917),U=n(36129);function N(e){let t;switch(e.type){case f.cM.NODE:t=e.nodeId;break;case f.cM.IMAGE:t=e.url;break;case f.cM.VIDEO:t=e.path;break;case f.cM.PROTOTYPE:t=e.startingNodeId;break;default:throw Error("unexpected content item type")}return`${e.type}:${t}`}function O(e){let[t,n]=a.useState(!e.isThumbnail&&!e.usesPreviewImage);if(a.useEffect(()=>{if(!e.imgUrl)return;let t=new Image;t.src=e.imgUrl,t.onload=()=>{let e=t.width/t.height;n(t=>t&&Math.abs(e-P.dp)>.01)}},[e.imgUrl]),null===e.imgUrl)return a.createElement("div",null,(0,g.t)("fig_feed.could_not_load_preview_image"));let o=e.isThumbnail&&e.thumbnailUrl?e.thumbnailUrl:e.imgUrl;return a.createElement(a.Fragment,null,e.showPreviewFacade&&a.createElement("div",{className:T.Hq},a.createElement(c.pz,{onClick:e.onUpdatePreviewImage},(0,g.t)("fig_feed.update_preview_image"))),a.createElement("img",{src:o,alt:(0,g.t)("fig_feed.thumbnail_alt_text"),draggable:!1,className:l()(T.tv,e.isThumbnail&&T.Jq,t&&T.Pd)}),e.isThumbnail?null:"image/gif"===e.mediaType?a.createElement("div",{className:T.mB},(0,g.t)("fig_feed.gif")):null)}function y(e){let t=!!e.editPreviewOptions;return a.createElement("div",{className:T.yE},e.contentItems.map((n,o)=>{let i;return e.editPreviewOptions?.applyToAllCallback&&(i=t=>e.editPreviewOptions.applyToAllCallback(t,N(n))),a.createElement("div",{key:o,className:l()({[T.Xt]:!0,[T.sD]:o===e.selectedIdx})},a.createElement(P.DH,{key:`details::${n.image_url}`,imageSrc:n.image_url,shouldZoomToStart:!1,shouldWheelPan:!0,showEditPreviewControls:t,setContentPreview:o===e.selectedIdx?e.editPreviewOptions?.setContentPreview:void 0,initialSnapshotState:e.editPreviewOptions?.initialSnapshotStates?.[N(n)],disableReset:!!e.editPreviewOptions?.disableReset,resetSnapshotState:e.editPreviewOptions?.selectedContentResetSnapshotState,pageBackgroundColor:e.editPreviewOptions?.pageBackgroundColor||n.backgroundColor&&(0,s.H0)(n.backgroundColor)||e.pageBackgroundColor&&(0,s.H0)(e.pageBackgroundColor)||void 0,applyToAllCallback:i,imageScale:t?1:void 0,enableZoomKeyControls:o===e.selectedIdx&&(e.source===h.Zp.DETAIL_MODAL||t),enableSnapToGuidelines:t,enableZoomControls:e.source===h.Zp.DETAIL_MODAL}))}))}function A(e){return a.createElement(C.D,{item:e.prototypeContent})}function M(e){let t=!!e.editPreviewOptions;return a.createElement(P.DH,{key:`details::${e.imageContent.url}`,imageSrc:e.imageContent.url,shouldZoomToStart:!1,shouldWheelPan:!0,showEditPreviewControls:t,setContentPreview:e.editPreviewOptions?.setContentPreview,initialSnapshotState:e.editPreviewOptions?.initialSnapshotStates?.[N(e.imageContent)],disableReset:!!e.editPreviewOptions?.disableReset,resetSnapshotState:e.editPreviewOptions?.selectedContentResetSnapshotState,applyToAllCallback:e.editPreviewOptions?.applyToAllCallback?t=>e.editPreviewOptions.applyToAllCallback(t,N(e.imageContent)):void 0,pageBackgroundColor:e.editPreviewOptions?.pageBackgroundColor||e.imageContent.backgroundColor&&(0,s.H0)(e.imageContent.backgroundColor)||e.pageBackgroundColor&&(0,s.H0)(e.pageBackgroundColor)||void 0,imageScale:1,enableZoomKeyControls:e.source===h.Zp.DETAIL_MODAL||t,enableSnapToGuidelines:t,enableZoomControls:e.source===h.Zp.DETAIL_MODAL})}function S(e){let t=(0,w.jI)(e.feedPostUuid,e.videoContent.path,e.source);return a.createElement(w.l0,{id:t,videoContent:e.videoContent,isThumbnail:e.isThumbnail,feedPostUuid:e.feedPostUuid,source:e.source})}function B(e){return e.isThumbnail?a.createElement("div",null,(0,g.tx)("fig_feed.video")):a.createElement("div",null,(0,g.tx)("fig_feed.transcode_after_submit"))}function D(e){if(v.cU.includes(e.videoContent.mediaType)&&""===e.videoContent.videoFileUuid)return a.createElement(B,{isThumbnail:e.isThumbnail});if(e.isThumbnail&&e.videoContent.coverImage)return a.createElement(O,{imgUrl:e.videoContent.coverImage,isThumbnail:!0});let t=(0,w.jI)(e.feedPostUuid,e.videoContent.path,e.source);return a.createElement(w.l0,{id:t,videoContent:e.videoContent,isThumbnail:e.isThumbnail,feedPostUuid:e.feedPostUuid,feedPostIdx:e.feedPostIdx,source:e.source})}function L(e){return a.createElement(a.Fragment,null,a.createElement(u.x,{isLoading:!e.content.imageUrl},()=>a.createElement(O,{imgUrl:e.content.imageUrl,isThumbnail:e.isThumbnail})),!e.isThumbnail&&a.createElement("div",{className:T.mB},(0,g.tx)("fig_feed.prototype_badge")))}function z(e){let t=e.contentItems[e.selectedIdx];switch(t.type){case f.cM.NODE:return a.createElement(y,{selectedIdx:e.selectedIdx,contentItems:e.contentItems,editPreviewOptions:e.editPreviewOptions,pageBackgroundColor:e.pageBackgroundColor,source:e.source});case f.cM.IMAGE:return a.createElement(M,{imageContent:t,source:e.source,editPreviewOptions:e.editPreviewOptions,pageBackgroundColor:e.pageBackgroundColor});case f.cM.VIDEO:return a.createElement(S,{videoContent:t,isThumbnail:!1,feedPostUuid:e.feedPostUuid,source:e.source});case f.cM.PROTOTYPE:return a.createElement(A,{prototypeContent:t});default:(0,o.xb)(t)}}function H(e){switch(e.content.type){case f.cM.NODE:let t=e.content,n=t.mediumImageUrl??t.preview_image_url??t.image_url,i=t.preview_image_url??t.image_url;return a.createElement(u.x,{isLoading:!!t.isLoading},()=>a.createElement(O,{imgUrl:e.isEditing?i:n,usesPreviewImage:!!t.preview_image_url,isThumbnail:e.isThumbnail,thumbnailUrl:e.isEditing?i:t.thumbnailUrl,showPreviewFacade:e.showPreviewFacade,onUpdatePreviewImage:e.onUpdatePreviewImage}));case f.cM.IMAGE:let l=e.content.mediumImageUrl??e.content.preview_image_url??e.content.url,r=e.content.preview_image_url??e.content.url;return a.createElement(O,{imgUrl:e.isEditing?r:l,isThumbnail:e.isThumbnail,usesPreviewImage:!!e.content.preview_image_url,mediaType:e.content.mediaType,thumbnailUrl:e.isEditing?r:e.content.thumbnailUrl,showPreviewFacade:e.showPreviewFacade,onUpdatePreviewImage:e.onUpdatePreviewImage});case f.cM.VIDEO:return a.createElement(D,{videoContent:e.content,isThumbnail:e.isThumbnail,feedPostUuid:e.feedPostUuid,feedPostIdx:e.feedPostIdx,source:e.source});case f.cM.PROTOTYPE:return a.createElement(L,{content:e.content,isThumbnail:e.isThumbnail});default:(0,o.xb)(e.content)}}function R(e){let t=!!e.editPreviewOptions,n=e.contentItems.length>1||t,{selectedContentIdx:o,pageBackgroundColor:i,setSelectedContentIdx:r,contentItems:c,onContentHover:p}=e,[v,h]=(0,d.M)();a.useEffect(()=>{p?.(h)},[h,p]);let I=a.useMemo(()=>c[o],[c,o]),P=a.useMemo(()=>n?a.createElement(F,{direction:"horizontal",contentItems:c,selectedIdx:o,setSelectedIdx:r,pageBackgroundColor:e.pageBackgroundColor,feedPostUuid:e.feedPostUuid,canAddContent:!1}):null,[n,c,o,r,e.pageBackgroundColor,e.feedPostUuid]);e.editPreviewOptions&&I&&"node"===I.type&&I.backgroundColor&&(e.editPreviewOptions.pageBackgroundColor=(0,s.H0)(I.backgroundColor)??void 0);let{openEditPreviewModalCallback:C,deleteSelectedItemCallback:w}=e,[k,x]=a.useState(!1),U=a.useMemo(()=>{if(!C&&!w||!k||!I)return null;let e=n?T.IN:T.r$;return a.createElement("div",{className:e},I&&(0,f.aT)(I)&&C&&a.createElement("div",null,a.createElement("button",{onClick:C,className:T.nY},(0,g.tx)("fig_feed.edit_preview"))),w&&a.createElement(m.B,{svg:_.A,className:T.j5,onClick:w,autosize:!0,"data-tooltip-type":E.Ib.TEXT,"data-tooltip":(0,g.t)("fig_feed.delete"),dataTestId:"delete-content-item"}))},[k,I,n,C,w]);return a.createElement("div",{className:l()(T.qG,t&&T.Mm)},a.createElement("div",{ref:v,className:n&&!t?T.Uz:T.xs,style:{backgroundColor:(0,b.mz)(I,e.pageBackgroundColor)},onMouseDown:e.onSelectedTileMouseDown,role:"button",tabIndex:0,onPointerEnter:()=>x(!0),onPointerLeave:()=>x(!1),"data-testid":"feed-post-content-section"},U,a.createElement(u.x,{isLoading:!I},()=>e.staticContent?a.createElement(H,{content:I,isThumbnail:!1,feedPostUuid:e.feedPostUuid,feedPostIdx:e.feedPostIdx,source:e.source}):a.createElement(z,{contentItems:c.filter(e=>null!==e),selectedIdx:o,editPreviewOptions:e.editPreviewOptions,feedPostUuid:e.feedPostUuid,pageBackgroundColor:i,source:e.source}))),P)}function F(e){let t=a.useRef(null);a.useEffect(()=>{let n=t.current,a=t.current?.children[e.selectedIdx];if(!n||!a)return;let o=n?.getBoundingClientRect();o?.top>=0&&o?.left>=0&&o?.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&o?.right<=(window.innerWidth||document.documentElement.clientWidth)&&a.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})},[e.direction,e.selectedIdx]);let n=(0,w.pN)(),{scrollToItem:o,onReorderCallback:i,setSelectedIdx:s,deleteItem:d}=e,[c,u]=a.useState(null),g=e.thumbnailType||"wide",v=a.useCallback((t,i,r)=>{let m=l()(T.iD,r&&T.Ut,"small"===g&&T.kL,"wide"===g&&T.Wr);return a.createElement("div",{className:m,onMouseDown:()=>{n(e.feedPostUuid),o?.(i),s?.(i)},onPointerEnter:()=>u(i),onPointerLeave:()=>u(null),role:"button",tabIndex:0,style:{backgroundColor:(0,b.mz)(t,e.pageBackgroundColor)},"data-testid":`content-item-${i}`},a.createElement(H,{content:t,isThumbnail:!0,isEditing:e.isEditing}),d&&i===c&&a.createElement("div",{className:T.nx},a.createElement("div",{className:T.fy,onClick:e=>{e.stopPropagation(),d(i)},role:"button",tabIndex:0},a.createElement(I.X,null))))},[e.pageBackgroundColor,e.feedPostUuid,g,e.isEditing,c,n,o,s,d]),f=t=>{if("horizontal"!==e.direction)return null;let n=e.selectedIdx===("left"===t?0:e.contentItems.length-1);return a.createElement(p.$,{onMouseDown:()=>{let n=(e.selectedIdx+("left"===t?-1:1)+e.contentItems.length)%e.contentItems.length;s?.(n)},icon:"left"===t?"chevron-left-32":"chevron-right-32",variant:"text",disabled:n})},E=l()(T.sm,"horizontal"===e.direction?T.d9:T.b1);if(i)return a.createElement("div",{className:E},a.createElement(r._.Group,{axis:"vertical"===e.direction?"y":"x",onReorder:i,values:e.contentItems,className:l()(T.M2,"horizontal"===e.direction?T.AA:T.h0),role:"button",tabIndex:0,ref:t},e.contentItems.map((t,n)=>a.createElement(r._.Item,{value:t,id:N(t),key:N(t),translate:"no"},v(t,n,!(e.canAddContent&&e.isAddingContent)&&n===e.selectedIdx))),e.canAddContent&&a.createElement("div",{className:l()(T.iD,"small"===e.thumbnailType&&T.kL,"wide"===e.thumbnailType&&T.Wr,e.isAddingContent?T.ad:T.WW),onMouseDown:e.setAddingActive,role:"button",tabIndex:0},a.createElement(m.B,{svg:k.A}))));{let n=l()(T.M2,"horizontal"===e.direction?T.n2:T.h0);return a.createElement("div",{className:E},f("left"),a.createElement("div",{className:n,ref:t},e.contentItems.map((t,n)=>a.createElement(a.Fragment,{key:n},v(t,n,n===e.selectedIdx)))),f("right"))}}function $(e){let t=e.contentItems[e.selectedIdx],n=t&&(0,f.aT)(t),{onReorderCallback:o,deleteItemAtIdx:i,setSelectedIdx:r,onFileInputChange:s,setContentPreview:d,openPostFromFileModal:c}=e,[p,v]=a.useState(0===e.contentItems.length);a.useEffect(()=>{0===e.contentItems.length?v(!0):v(!1)},[e.contentItems.length]);let h=e.contentItems.length>=1||n,I=a.useCallback(()=>{v(!0)},[]),C=a.useCallback(e=>{r(e),v(!1)},[r]),[w,k]=a.useState(!1),O=a.useMemo(()=>w&&t?a.createElement("div",{className:T.r$},i&&a.createElement(m.B,{svg:_.A,className:T.j5,onClick:()=>i(e.selectedIdx),autosize:!0,"data-tooltip-type":E.Ib.TEXT,"data-tooltip":(0,g.t)("fig_feed.delete"),dataTestId:"delete-content-item"})):null,[t,w,e.selectedIdx,i]),y=a.useRef(null),A=(e,t,n,o)=>a.createElement("div",{className:T.c9,onClick:o,role:"button",tabIndex:0},a.createElement(m.B,{svg:n}),a.createElement("div",{className:T.LO},a.createElement("div",{className:T.Gq},e),t)),M=a.useCallback((n,a,o)=>{let i=N(t);t&&i&&!(0,P.L$)(a,e.snapshotStates[i])&&d(i,n,a)},[t,e.snapshotStates,d]),S=(t,n)=>{M(t,n,e.selectedIdx)},[B,D]=a.useState({}),L=a.useCallback(()=>{D(e=>({...e,[N(t)]:!0}))},[t]);return a.createElement("div",null,(()=>{if(p){let t=null===e.attachedFile?(0,g.t)("fig_feed.add_frames"):"whiteboard"===e.attachedFile.editor_type?(0,g.t)("fig_feed.share_something_from_figjam"):(0,g.t)("fig_feed.add_frames_from_this_figma_file");return a.createElement("div",{className:l()(T.Er,h&&T.QX)},a.createElement("div",{className:l()(T.hM,e.dragging&&T.cB)},A((0,g.t)("fig_feed.choose_frames"),t,x.A,c),a.createElement("form",null,a.createElement("input",{type:"file",name:"fileInput",id:"fileInput",accept:f.bB.join(","),ref:y,onChange:s(y),multiple:!0,className:T.Fg}),a.createElement("label",{htmlFor:"fileInput"},A((0,g.t)("fig_feed.upload_files"),(0,g.t)("fig_feed.add_images_or_videos"),U.A)))))}return a.createElement("div",{className:l()(T.Er,h&&T.QX),style:{backgroundColor:(0,b.mz)(t,e.pageBackgroundColor)},role:"button",tabIndex:0,onPointerEnter:()=>k(!0),onPointerLeave:()=>k(!1)},O,a.createElement(u.x,{isLoading:!t},()=>(0,f.aT)(t)&&("edit"===e.mode&&(B[N(t)]||!t.shouldBlockEditPreview)||"create"===e.mode)?a.createElement(z,{contentItems:e.contentItems,selectedIdx:e.selectedIdx,editPreviewOptions:{setContentPreview:S,initialSnapshotStates:e.snapshotStates,disableReset:!0},feedPostUuid:e.feedPostUuid,pageBackgroundColor:e.pageBackgroundColor,source:e.source}):a.createElement(H,{content:t,isThumbnail:!1,feedPostUuid:e.feedPostUuid,source:e.source,showPreviewFacade:"edit"===e.mode&&(0,f.aT)(t)&&t.shouldBlockEditPreview,onUpdatePreviewImage:"edit"===e.mode?L:void 0})),e.dragging&&a.createElement("div",{className:T.c$},a.createElement("div",{className:T.W9})))})(),h?a.createElement(F,{direction:"horizontal",thumbnailType:"wide",contentItems:e.contentItems,onReorderCallback:o,deleteItem:i,selectedIdx:e.selectedIdx,setSelectedIdx:C,pageBackgroundColor:e.pageBackgroundColor,feedPostUuid:e.feedPostUuid,canAddContent:e.contentItems.length<f.e3,isAddingContent:p,setAddingActive:I,isEditing:!0}):null)}},339617:(e,t,n)=>{n.d(t,{A:()=>v,B:()=>p});var a=n(411855),o=n(188507),i=n(629019),l=n.n(i),r=n(210954),s=n(564577),d=n(67294),c=n(738269),u=n(798099),m=n(589640),g=n(681807);function p(e){let t=e.date&&a.createElement(s.h1,{date:e.date,style:e.shortDate?"short":void 0,capitalize:!0,key:"from-now"}),n=[a.createElement("div",{key:"from-now",onMouseDown:e.onTileMouseDown,role:"button",tabIndex:0,className:l()(e.onTileMouseDown&&g.WJ,g.PI)},t)];return a.createElement("div",{className:g.ME},a.createElement(v,{user:e.user,size:e.size,noAvatar:e.noAvatar,noHandle:e.noHandle,appendToHandle:n}))}function v(e){let t=(0,o.wA)(),n=a.useCallback(n=>{n.stopPropagation(),e.user.id&&t(c.$T({view:"user",userId:e.user.id,userViewTab:m.o.INTERNAL_PROFILE_POSTS}))},[t,e.user.id]),i=e.appendToHandle||!1===e.noHandle;return a.createElement("div",{className:g.ME},!e.noAvatar&&a.createElement(r.N,{onClick:n,trusted:!0,onMouseDown:u.dG},a.createElement(d.H8,{user:e.user,size:e.size??d.Pf.LARGE})),i&&a.createElement("div",{className:g.Qs},!e.noHandle&&a.createElement(r.N,{className:g.TK,onClick:n,trusted:!0},a.createElement("div",{className:g.p$},e.user.handle)),e.appendToHandle))}}}]);

//# debugId=8ea1e4bf-33b6-5562-930b-3bf5d77d5135

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/c4f3dd06d3caeda5b1a6c5db68b3632a2683ca54/9634-22d4b6c1fcd04f08.min.js.map